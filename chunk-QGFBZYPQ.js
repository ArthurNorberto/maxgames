import{a as A}from"./chunk-G5FG67UX.js";import{b as F,c,d as I,e as z,g as k,h as W,i as N,j as T,k as O,l as V,m as G,n as D,s as L,t as j,u as q}from"./chunk-5VMU7HGZ.js";import{Ab as g,Db as E,Eb as w,Fb as P,Ga as s,Pa as b,T as v,U as f,Ua as h,Ya as _,db as u,eb as t,ec as x,fb as e,fc as y,gb as m,lc as M,mb as S,ob as o,qb as C,zb as i}from"./chunk-D5XL275M.js";function J(p,a){if(p&1){let r=S();t(0,"tr")(1,"td",48),i(2),e(),t(3,"td",48),i(4),e(),t(5,"td",49)(6,"button",50),o("click",function(){let l=v(r).$implicit,d=C();return f(d.editarPalavra(d.allWords.indexOf(l)))}),i(7,"Editar"),e(),t(8,"button",51),o("click",function(){let l=v(r).$implicit,d=C();return f(d.removerPalavra(d.allWords.indexOf(l)))}),i(9,"Excluir"),e()()()}if(p&2){let r=a.$implicit;s(2),g(r.palavra),s(2),g(r.dica)}}function R(p,a){p&1&&(t(0,"tr")(1,"td",52),i(2," Nenhuma palavra encontrada. "),e()())}var B=class p{constructor(a,r){this.fb=a;this.service=r}niveis=["F\xE1cil","M\xE9dio","Dif\xEDcil"];allWords=[];filteredWords=[];filtro="";editingIndex=null;wordForm;settingsForm;wordModalInstance;settingsModalInstance;ngOnInit(){this.allWords=[...this.service.getPalavras()],this.filteredWords=[...this.allWords],this.wordForm=this.fb.group({palavra:["",[c.required,c.minLength(2)]],dica:["",[c.required,c.minLength(3)]]}),this.settingsForm=this.fb.group({minGrid:[10,c.required],maxGrid:[20,c.required],timeLimitSec:[300],allowHints:[!0],wordsPerGame:[8,c.required]})}aplicarFiltro(){let a=this.filtro.toLowerCase();this.filteredWords=this.allWords.filter(r=>r.palavra.toLowerCase().includes(a)||r.dica.toLowerCase().includes(a))}novaPalavra(){this.editingIndex=null,this.wordForm.reset({palavra:"",dica:""}),this.openWordModal()}editarPalavra(a){this.editingIndex=a;let r=this.allWords[a];this.wordForm.patchValue(r),this.openWordModal()}salvarPalavra(){if(this.wordForm.invalid)return;let a=this.wordForm.value;this.editingIndex===null?this.allWords.push(a):this.allWords[this.editingIndex]=a,this.aplicarFiltro(),this.wordModalInstance.hide()}removerPalavra(a){this.allWords.splice(a,1),this.aplicarFiltro()}removerFiltradas(){let a=new Set(this.filteredWords.map(r=>r.palavra));this.allWords=this.allWords.filter(r=>!a.has(r.palavra)),this.aplicarFiltro()}abrirSettings(){this.openSettingsModal()}openWordModal(){let a=document.getElementById("wordModal");this.wordModalInstance=new bootstrap.Modal(a),this.wordModalInstance.show()}openSettingsModal(){let a=document.getElementById("settingsModal");this.settingsModalInstance=new bootstrap.Modal(a),this.settingsModalInstance.show()}salvarSettings(){if(this.settingsForm.invalid)return;let a=this.settingsForm.value;console.log("Salvando settings:",a),this.settingsModalInstance.hide()}exportJson(){let a={words:this.allWords,settings:this.settingsForm.value},r=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),n=URL.createObjectURL(r),l=document.createElement("a");l.href=n,l.download="palavras-cruzadas-config.json",l.click()}importJson(a){let r=a.target.files[0];if(!r)return;let n=new FileReader;n.onload=()=>{try{let l=JSON.parse(n.result);this.allWords=l.words??[],this.settingsForm.patchValue(l.settings??{}),this.aplicarFiltro()}catch{alert("Arquivo inv\xE1lido.")}},n.readAsText(r)}static \u0275fac=function(r){return new(r||p)(b(L),b(A))};static \u0275cmp=h({type:p,selectors:[["app-palavras-cruzadas-config"]],decls:96,vars:9,consts:[[1,"admin-container","container","py-3"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"page-title","mb-0"],[1,"text-muted"],[1,"d-flex","gap-2","align-items-center"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-lg"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-gear"],[1,"btn-group"],[1,"btn","btn-outline-success",3,"click"],[1,"btn","btn-outline-info","mb-0"],["type","file","accept",".json","hidden","",3,"change"],[1,"mb-3","d-flex","gap-2"],["placeholder","Pesquisar palavra...",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"table-responsive","card","p-0","shadow-sm"],[1,"table","mb-0"],[1,"table-light"],[2,"width","180px"],[2,"width","260px"],[2,"width","160px"],[4,"ngFor","ngForOf"],[4,"ngIf"],["id","wordModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content",3,"ngSubmit","formGroup"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"form-label"],["formControlName","palavra","placeholder","Ex: MOTOR",1,"form-control"],["formControlName","dica","placeholder","Ex: Parte do carro",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],["id","settingsModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"row","g-3"],[1,"col-md-6"],["type","number","formControlName","minGrid",1,"form-control"],["type","number","formControlName","maxGrid",1,"form-control"],["type","number","formControlName","timeLimitSec",1,"form-control"],["formControlName","allowHints",1,"form-select"],[3,"ngValue"],["type","number","formControlName","wordsPerGame",1,"form-control"],[1,"align-middle"],[1,"align-middle","text-end"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],["colspan","3",1,"text-center","py-4","text-muted"]],template:function(r,n){r&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),i(4,"Palavras Cruzadas \u2014 Administra\xE7\xE3o"),e(),t(5,"small",3),i(6,"Gerencie palavras, n\xEDveis e configura\xE7\xF5es avan\xE7adas"),e()(),t(7,"div",4)(8,"button",5),o("click",function(){return n.novaPalavra()}),m(9,"i",6),i(10," Nova palavra "),e(),t(11,"button",7),o("click",function(){return n.abrirSettings()}),m(12,"i",8),i(13," Configura\xE7\xF5es "),e(),t(14,"div",9)(15,"button",10),o("click",function(){return n.exportJson()}),i(16,"Exportar"),e(),t(17,"label",11),i(18," Importar "),t(19,"input",12),o("change",function(d){return n.importJson(d)}),e()()()()(),t(20,"div",13)(21,"input",14),P("ngModelChange",function(d){return w(n.filtro,d)||(n.filtro=d),d}),o("ngModelChange",function(){return n.aplicarFiltro()}),e(),t(22,"button",15),o("click",function(){return n.removerFiltradas()}),i(23," Remover filtradas "),e()(),t(24,"div",16)(25,"table",17)(26,"thead",18)(27,"tr")(28,"th",19),i(29,"Palavra"),e(),t(30,"th",20),i(31,"Dica"),e(),t(32,"th",21),i(33,"A\xE7\xF5es"),e()()(),t(34,"tbody"),_(35,J,10,2,"tr",22)(36,R,3,0,"tr",23),e()()()(),t(37,"div",24)(38,"div",25)(39,"form",26),o("ngSubmit",function(){return n.salvarPalavra()}),t(40,"div",27)(41,"h5",28),i(42),e(),t(43,"button",29),o("click",function(){return n.wordModalInstance==null?null:n.wordModalInstance.hide()}),e()(),t(44,"div",30)(45,"div",31)(46,"label",32),i(47,"Palavra"),e(),m(48,"input",33),e(),t(49,"div",31)(50,"label",32),i(51,"Dica"),e(),m(52,"input",34),e()(),t(53,"div",35)(54,"button",36),o("click",function(){return n.wordModalInstance==null?null:n.wordModalInstance.hide()}),i(55,"Cancelar"),e(),t(56,"button",37),i(57,"Salvar"),e()()()()(),t(58,"div",38)(59,"div",39)(60,"form",26),o("ngSubmit",function(){return n.salvarSettings()}),t(61,"div",27)(62,"h5",28),i(63,"Configura\xE7\xF5es do Palavras Cruzadas"),e(),t(64,"button",29),o("click",function(){return n.settingsModalInstance==null?null:n.settingsModalInstance.hide()}),e()(),t(65,"div",30)(66,"div",40)(67,"div",41)(68,"label",32),i(69,"Grid m\xEDnimo"),e(),m(70,"input",42),e(),t(71,"div",41)(72,"label",32),i(73,"Grid m\xE1ximo"),e(),m(74,"input",43),e(),t(75,"div",41)(76,"label",32),i(77,"Tempo total (segundos)"),e(),m(78,"input",44),e(),t(79,"div",41)(80,"label",32),i(81,"Habilitar dicas"),e(),t(82,"select",45)(83,"option",46),i(84,"Sim"),e(),t(85,"option",46),i(86,"N\xE3o"),e()()(),t(87,"div",41)(88,"label",32),i(89,"Quantidade de palavras por jogo"),e(),m(90,"input",47),e()()(),t(91,"div",35)(92,"button",36),o("click",function(){return n.settingsModalInstance==null?null:n.settingsModalInstance.hide()}),i(93,"Cancelar"),e(),t(94,"button",37),i(95,"Salvar configura\xE7\xF5es"),e()()()()()),r&2&&(s(21),E("ngModel",n.filtro),s(),u("disabled",!n.filteredWords.length),s(13),u("ngForOf",n.filteredWords),s(),u("ngIf",!n.filteredWords.length),s(3),u("formGroup",n.wordForm),s(3),g(n.editingIndex===null?"Nova palavra":"Editar palavra"),s(18),u("formGroup",n.settingsForm),s(23),u("ngValue",!0),s(2),u("ngValue",!1))},dependencies:[M,x,y,j,W,G,D,F,N,V,I,z,k,q,O,T],encapsulation:2})};export{B as PalavrasCruzadasConfigComponent};
