<div class="wordsearch-wrapper container py-5">
  <div class="row justify-content-center">

    <div class="col-lg-8 col-md-12">
      <h2 class="text-center mb-3 animate__animated animate__fadeInDown">
        ğŸ” CaÃ§a-Palavras Autoglass
      </h2>
      <p class="text-center text-muted mb-4">
        Escolha o nÃ­vel e encontre as palavras relacionadas ao mundo automotivo!
      </p>

      <!-- ğŸ”¹ SeleÃ§Ã£o de dificuldade -->
      <div class="difficulty-select text-center mb-4">
        <button class="btn btn-success mx-2" [class.active]="difficulty==='facil'" (click)="setDifficulty('facil')">
          ğŸ˜Š FÃ¡cil (5)
        </button>
        <button class="btn btn-warning mx-2" [class.active]="difficulty==='medio'" (click)="setDifficulty('medio')">
          ğŸ˜ MÃ©dio (8)
        </button>
        <button class="btn btn-danger mx-2" [class.active]="difficulty==='dificil'" (click)="setDifficulty('dificil')">
          ğŸ˜ˆ DifÃ­cil (10)
        </button>
      </div>

      <!-- ğŸ”„ Spinner -->
      <div *ngIf="loading" class="loading-overlay d-flex flex-column align-items-center justify-content-center py-5">
        <div class="spinner-border text-primary mb-3" style="width: 3rem; height: 3rem;" role="status"></div>
        <p class="text-muted">Gerando jogo...</p>
      </div>

      <!-- ğŸ”¹ Ãrea do jogo -->
      <div *ngIf="!loading" class="animate__animated animate__fadeIn">
        <div class="d-flex justify-content-between align-items-center mb-3 px-3">
          <span>â±ï¸ Tempo: <strong>{{ timer }}s</strong></span>
          <span>â­ Pontos: <strong>{{ score }}</strong></span>
        </div>

        <div class="game-area position-relative mb-4">
          <div class="grid" [ngStyle]="{'grid-template-columns': 'repeat(' + cols + ', 1fr)'}">
            <!-- ğŸ”¹ LETRAS AGORA SÃƒO data-letter (nÃ£o pesquisÃ¡veis com CTRL+F) -->
            <div
              *ngFor="let cell of grid; let idx = index; trackBy: trackByIndex"
              class="cell"
              [attr.data-letter]="cell.letter"
              [class.selected]="selectedCells.includes(idx)"
              [class.found]="cell.isFound"
              (mousedown)="cellMouseDown(idx)"
              (mouseenter)="cellMouseEnter(idx)"
              (mouseup)="cellMouseUp()">
            </div>
          </div>
        </div>

        <div class="word-list mb-4 text-center">
          <h5>Palavras para encontrar:</h5>
          <ul>
            <li *ngFor="let w of words" [class.found]="foundWords.includes(w)">
              {{ w }}
            </li>
          </ul>
        </div>

        <div *ngIf="gameOver" class="end-screen text-center animate__animated animate__zoomIn">
          <h4>{{ endMessage }}</h4>
          <button class="btn btn-secondary mt-3" (click)="newGame()">ğŸ” Nova Partida</button>
        </div>
      </div>
    </div>

    <div class="col-lg-4 col-md-8 col-sm-10 mt-4 mt-lg-0">
      <div class="ranking-box shadow-sm p-3 rounded bg-white animate__animated animate__fadeInRight">
        <h5 class="mb-3 text-center">ğŸ† Ranking â€“ Quem achou</h5>
        <ol class="mb-0 text-start">
          <li *ngFor="let r of ranking">{{ r.name }} â€” {{ r.score }} pts</li>
        </ol>
      </div>
    </div>

  </div>
</div>
