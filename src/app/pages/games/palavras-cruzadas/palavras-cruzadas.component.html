<div class="crossword-wrapper">

  <!-- CONTAINER DO JOGO -->
  <div class="crossword-container">

    <!-- HEADER -->
    <div class="header">
      <div class="title-area">
        <h2>ğŸ§© <span>Palavras Cruzadas</span> <strong>Autoglass</strong></h2>
        <p class="subtitle">Complete todas as palavras automotivas antes que o tempo acabe!</p>
      </div>

      <div class="status">
        <div class="timer">â±ï¸ <strong>{{ timeRemaining }}s</strong></div>
        <div class="score">â­ <strong>{{ score ?? '-' }}</strong></div>
        <div class="actions">
          <button class="btn btn-sm" (click)="newGame()" [disabled]="loading">ğŸ” Novo</button>
          <button class="btn btn-sm" (click)="revealAll()" [disabled]="loading">ğŸ‘ï¸ Revelar</button>
        </div>
      </div>
    </div>

    <!-- ABAS (depois do tÃ­tulo) -->
    <ul class="nav nav-tabs justify-content-center mb-4">
      <li class="nav-item">
        <button class="nav-link" [class.active]="activeTab==='jogo'" (click)="setActiveTab('jogo')">
          ğŸ§© Jogo
        </button>
      </li>
      <li class="nav-item">
        <button class="nav-link" [class.active]="activeTab==='ranking'" (click)="setActiveTab('ranking')">
          ğŸ† Ranking
        </button>
      </li>
    </ul>

    <!-- CONTEÃšDO DAS ABAS -->
    <div *ngIf="activeTab==='jogo'" class="tab-content animate__animated animate__fadeIn">

      <div *ngIf="loading" class="loading">
        <div class="spinner-border text-primary" role="status"></div>
        <div class="muted">Gerando grade...</div>
      </div>

      <div *ngIf="!loading" class="play-area animate__animated animate__fadeInUp">
        <div class="board-section">
          <div class="board-wrap">
            <div class="grid" [style.gridTemplateColumns]="'repeat(' + gridSize + ', 1fr)'">
              <ng-container *ngFor="let row of grid; let r = index">
                <ng-container *ngFor="let cell of row; let c = index">
                  <div class="cell-wrapper" [class.block]="cell.blocked">
                    <div *ngIf="cell.blocked" class="cell-block"></div>
                    <div *ngIf="!cell.blocked" class="cell">
                      <div *ngIf="cell.number" class="cell-number">{{ cell.number }}</div>
                      <input maxlength="1" autocomplete="off"
                             [value]="cell.value || ''"
                             (input)="onInput(r,c,$event)"
                             [attr.aria-label]="'cÃ©lula-'+r+'-'+c" />
                    </div>
                  </div>
                </ng-container>
              </ng-container>
            </div>
          </div>

          <div class="clues-wrap">
            <div class="clues">
              <h5>â†’ Horizontais</h5>
              <ol>
                <li *ngFor="let cw of acrossClues">
                  <strong>{{ cw.number }}.</strong> {{ cw.word.length }} letras
                </li>
              </ol>
            </div>

            <div class="clues">
              <h5>â†“ Verticais</h5>
              <ol>
                <li *ngFor="let cw of downClues">
                  <strong>{{ cw.number }}.</strong> {{ cw.word.length }} letras
                </li>
              </ol>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div *ngIf="activeTab==='ranking'" class="tab-content animate__animated animate__fadeIn">
      <div class="ranking-wrapper animate__animated animate__fadeInRight">
        <h4>ğŸ† Ranking Autoglass</h4>
        <ul>
          <li *ngFor="let r of ranking; let i = index" [class.top]="i < 3">
            <span class="pos">#{{ i + 1 }}</span>
            <span class="name">{{ r.name }}</span>
            <span class="points">{{ r.score }} pts</span>
          </li>
        </ul>
      </div>
    </div>

  </div>
</div>
