import{a as V}from"./chunk-KSIHQLWH.js";import{b as z,d as O,g as q,l as k,m as I,n as P,t as N}from"./chunk-5VMU7HGZ.js";import{Ab as h,Bb as S,Db as f,Eb as C,Fb as x,Ga as c,Pa as Q,T as u,U as m,Ua as w,Ya as g,db as p,eb as n,ec as y,fb as i,fc as M,lc as E,mb as b,ob as _,qb as d,zb as s}from"./chunk-D5XL275M.js";function F(a,o){if(a&1){let e=b();n(0,"tr")(1,"td"),s(2),i(),n(3,"td"),s(4),i(),n(5,"td")(6,"button",15),_("click",function(){let t=u(e).$implicit,r=d();return m(r.editQuestion(t))}),s(7,"Editar"),i(),n(8,"button",16),_("click",function(){let t=u(e).$implicit,r=d();return m(r.deleteQuestion(t))}),s(9,"Excluir"),i()()()}if(a&2){let e=o.$implicit;c(2),h(e.question),c(2),h(e.level)}}function W(a,o){if(a&1){let e=b();n(0,"button",26),_("click",function(){u(e);let t=d().index,r=d(2);return m(r.removeOption(t))}),s(1,"X"),i()}}function D(a,o){if(a&1){let e=b();n(0,"div",24)(1,"input",18),x("ngModelChange",function(t){let r=u(e).index,v=d(2);return C(v.selectedQuestion.options[r],t)||(v.selectedQuestion.options[r]=t),m(t)}),i(),g(2,W,2,0,"button",25),i()}if(a&2){let e=o.index,l=d(2);c(),f("ngModel",l.selectedQuestion.options[e]),c(),p("ngIf",l.selectedQuestion.options.length>1)}}function B(a,o){if(a&1&&(n(0,"option",27),s(1),i()),a&2){let e=o.$implicit;p("value",e),c(),h(e)}}function J(a,o){if(a&1&&(n(0,"option",27),s(1),i()),a&2){let e=o.$implicit;p("value",e),c(),h(e)}}function A(a,o){if(a&1){let e=b();n(0,"div",17)(1,"label"),s(2,"Pergunta"),i(),n(3,"input",18),x("ngModelChange",function(t){u(e);let r=d();return C(r.selectedQuestion.question,t)||(r.selectedQuestion.question=t),m(t)}),i(),n(4,"label",19),s(5,"Op\xE7\xF5es"),i(),g(6,D,3,2,"div",20),n(7,"button",21),_("click",function(){u(e);let t=d();return m(t.addOption())}),s(8,"\u2795 Adicionar Op\xE7\xE3o"),i(),n(9,"label",19),s(10,"Resposta Correta"),i(),n(11,"select",22),x("ngModelChange",function(t){u(e);let r=d();return C(r.selectedQuestion.answer,t)||(r.selectedQuestion.answer=t),m(t)}),g(12,B,2,2,"option",23),i(),n(13,"label",19),s(14,"Dica"),i(),n(15,"input",18),x("ngModelChange",function(t){u(e);let r=d();return C(r.selectedQuestion.hint,t)||(r.selectedQuestion.hint=t),m(t)}),i(),n(16,"label",19),s(17,"N\xEDvel"),i(),n(18,"select",22),x("ngModelChange",function(t){u(e);let r=d();return C(r.selectedQuestion.level,t)||(r.selectedQuestion.level=t),m(t)}),g(19,J,2,2,"option",23),i()()}if(a&2){let e=d();c(3),f("ngModel",e.selectedQuestion.question),c(3),p("ngForOf",e.selectedQuestion.options),c(5),f("ngModel",e.selectedQuestion.answer),c(),p("ngForOf",e.selectedQuestion.options),c(3),f("ngModel",e.selectedQuestion.hint),c(3),f("ngModel",e.selectedQuestion.level),c(),p("ngForOf",e.levels)}}var T=class a{constructor(o){this.quizService=o}questions=[];selectedQuestion=null;isNew=!1;editingIndex=null;modalInstance;levels=["F\xE1cil","M\xE9dio","Dif\xEDcil","Muito Dif\xEDcil","Especialista"];ngOnInit(){this.questions=[...this.quizService.questions],setTimeout(()=>{let o=document.getElementById("quizModal");this.modalInstance=new bootstrap.Modal(o,{backdrop:"static"})})}openNewQuestion(){this.isNew=!0,this.editingIndex=null,this.selectedQuestion={question:"",options:[""],answer:"",hint:"",level:"F\xE1cil"},this.modalInstance.show()}editQuestion(o){this.isNew=!1,this.editingIndex=this.quizService.questions.indexOf(o),this.selectedQuestion=JSON.parse(JSON.stringify(o)),this.modalInstance.show()}closeModal(){this.modalInstance.hide(),this.selectedQuestion=null,this.editingIndex=null}save(){if(!this.selectedQuestion)return;let{question:o,options:e}=this.selectedQuestion;if(!o.trim()){alert("Informe a pergunta");return}if(this.selectedQuestion.options=e.map(l=>l.trim()).filter(l=>l.length),this.selectedQuestion.options.length<2){alert("Ao menos 2 op\xE7\xF5es.");return}this.isNew?this.quizService.questions.push(JSON.parse(JSON.stringify(this.selectedQuestion))):this.editingIndex!==null&&(this.quizService.questions[this.editingIndex]=JSON.parse(JSON.stringify(this.selectedQuestion))),this.questions=[...this.quizService.questions],this.closeModal()}addOption(){this.selectedQuestion.options.push("")}removeOption(o){this.selectedQuestion.options.splice(o,1)}deleteQuestion(o){confirm("Excluir pergunta?")&&(this.quizService.questions=this.quizService.questions.filter(e=>e!==o),this.questions=[...this.quizService.questions])}static \u0275fac=function(e){return new(e||a)(Q(V))};static \u0275cmp=w({type:a,selectors:[["app-quiz-config"]],decls:30,vars:3,consts:[[1,"container","mt-4"],[1,"btn","btn-primary","mt-2",3,"click"],[1,"mt-4"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["id","quizModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-sm","btn-warning","me-2",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"modal-body"],[1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3"],["class","d-flex gap-2 mb-2",4,"ngFor","ngForOf"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","gap-2","mb-2"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-danger",3,"click"],[3,"value"]],template:function(e,l){e&1&&(n(0,"div",0)(1,"h3"),s(2,"Configurar Perguntas"),i(),n(3,"button",1),_("click",function(){return l.openNewQuestion()}),s(4,"\u2795 Nova Pergunta"),i(),n(5,"div",2)(6,"table",3)(7,"thead")(8,"tr")(9,"th"),s(10,"Pergunta"),i(),n(11,"th"),s(12,"N\xEDvel"),i(),n(13,"th"),s(14,"A\xE7\xF5es"),i()()(),n(15,"tbody"),g(16,F,10,2,"tr",4),i()()()(),n(17,"div",5)(18,"div",6)(19,"div",7)(20,"div",8)(21,"h5",9),s(22),i(),n(23,"button",10),_("click",function(){return l.closeModal()}),i()(),g(24,A,20,7,"div",11),n(25,"div",12)(26,"button",13),_("click",function(){return l.closeModal()}),s(27,"Cancelar"),i(),n(28,"button",14),_("click",function(){return l.save()}),s(29,"Salvar"),i()()()()()),e&2&&(c(16),p("ngForOf",l.questions),c(6),S(" ",l.editingIndex===null?"Nova Pergunta":"Editar Pergunta"," "),c(2),p("ngIf",l.selectedQuestion))},dependencies:[E,y,M,N,I,P,z,k,O,q],styles:[".page[_ngcontent-%COMP%]{width:100%;padding:20px 8px}.header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:12px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:15px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #e6e9ee;text-align:left}.q-text[_ngcontent-%COMP%]{max-width:680px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.empty[_ngcontent-%COMP%]{padding:18px;text-align:center;color:#777}.btn[_ngcontent-%COMP%]{border:none;padding:8px 14px;border-radius:6px}.btn.danger[_ngcontent-%COMP%]{background:#c62828}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fbff}"]})};export{T as QuizConfigComponent};
