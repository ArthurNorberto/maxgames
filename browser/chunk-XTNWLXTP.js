import{a as j}from"./chunk-6OVIINUV.js";import{b as O,c,d as P,e as N,g as W,h as k,i as A,j as T,k as V,l as R,m as L,n as G,s as B,t as D,u as U}from"./chunk-5VMU7HGZ.js";import{Ab as g,Db as F,Eb as w,Fb as x,Ga as l,Pa as b,T as v,U as h,Ua as C,Ya as _,a as f,db as d,eb as t,ec as M,fb as e,fc as y,gb as p,lc as I,mb as E,ob as m,qb as S,zb as i}from"./chunk-D5XL275M.js";function z(u,o){if(u&1){let r=E();t(0,"tr")(1,"td"),i(2),e(),t(3,"td"),i(4),e(),t(5,"td",54)(6,"button",55),m("click",function(){let a=v(r).$implicit,s=S();return h(s.editarPalavra(s.allWords.indexOf(a)))}),i(7,"Editar"),e(),t(8,"button",56),m("click",function(){let a=v(r).$implicit,s=S();return h(s.removerPalavra(s.allWords.indexOf(a)))}),i(9,"Excluir"),e()()()}if(u&2){let r=o.$implicit;l(2),g(r),l(2),g(r.length)}}function H(u,o){u&1&&(t(0,"tr")(1,"td",57),i(2,"Nenhuma palavra encontrada."),e()())}function $(u,o){u&1&&(t(0,"div",58),i(1," Palavra inv\xE1lida (m\xEDnimo 2 caracteres). "),e())}var q=class u{constructor(o,r){this.fb=o;this.forcaService=r;this.wordForm=this.fb.group({palavra:["",[c.required,c.minLength(2)]]});let n=this.forcaService.getSettings();this.settings=n,this.settingsForm=this.fb.group({timePerRound:[n.timePerRound,[c.required,c.min(1)]],resetOnCorrect:[n.resetOnCorrect],penaltySeconds:[n.penaltySeconds,[c.required,c.min(0)]],maxParts:[n.maxParts,[c.required,c.min(1),c.max(12)]],allowAccents:[n.allowAccents],allowCedilla:[n.allowCedilla],showHint:[n.showHint],showLengthBeforeStart:[n.showLengthBeforeStart]})}allWords=[];filteredWords=[];filtro="";wordForm;settingsForm;wordModalInstance;settingsModalInstance;editingIndex=null;difficulties=["F\xE1cil","M\xE9dio","Dif\xEDcil"];settings;ngOnInit(){this.loadWords(),setTimeout(()=>{let o=document.getElementById("wordModal");o&&(this.wordModalInstance=new bootstrap.Modal(o));let r=document.getElementById("settingsModal");r&&(this.settingsModalInstance=new bootstrap.Modal(r))},50)}ngOnDestroy(){this.wordModalInstance?.hide(),this.settingsModalInstance?.hide()}loadWords(){this.allWords=this.forcaService.getAllWords(),this.filteredWords=[...this.allWords]}aplicarFiltro(){let o=(this.filtro||"").trim().toLowerCase();if(!o){this.filteredWords=[...this.allWords];return}this.filteredWords=this.allWords.filter(r=>r.toLowerCase().includes(o))}novaPalavra(){this.editingIndex=null,this.wordForm.reset({palavra:""}),this.wordModalInstance?.show()}editarPalavra(o){this.editingIndex=o;let r=this.allWords[o]||"";this.wordForm.setValue({palavra:r}),this.wordModalInstance?.show()}salvarPalavra(){if(this.wordForm.invalid){this.wordForm.markAllAsTouched();return}let o=(this.wordForm.value.palavra||"").toString().trim().toUpperCase();o&&(this.editingIndex!==null&&this.editingIndex>=0?(this.forcaService.updateWord(this.editingIndex,o),this.allWords[this.editingIndex]=o):(this.forcaService.addWord(o),this.allWords.unshift(o)),this.aplicarFiltro(),this.wordModalInstance?.hide())}removerPalavra(o){let r=this.allWords[o];r&&confirm(`Remover a palavra "${r}" ?`)&&(this.forcaService.removeWord(o),this.allWords.splice(o,1),this.aplicarFiltro())}exportJson(){let o={words:this.allWords,settings:this.settingsForm.value},r=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),n=URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.download="forca-config.json",a.click(),URL.revokeObjectURL(n)}importJson(o){let r=o.target;if(!r.files?.length)return;let n=r.files[0],a=new FileReader;a.onload=()=>{try{let s=JSON.parse(String(a.result));s.words&&Array.isArray(s.words)&&(this.allWords=s.words.map(J=>(J||"").toString().toUpperCase()),this.forcaService.setAllWords(this.allWords)),s.settings&&(this.settingsForm.patchValue(s.settings),this.forcaService.saveSettings(s.settings)),this.aplicarFiltro(),alert("Importa\xE7\xE3o conclu\xEDda")}catch{alert("Arquivo inv\xE1lido")}},a.readAsText(n),r.value=""}abrirSettings(){this.settingsModalInstance?.show()}salvarSettings(){if(this.settingsForm.invalid){this.settingsForm.markAllAsTouched();return}let o=f(f({},this.forcaService.getSettings()),this.settingsForm.value);this.forcaService.saveSettings(o),this.settings=o,this.settingsModalInstance?.hide(),alert("Configura\xE7\xF5es salvas")}adicionarExemplo(){let o=["PARAFUSO","BUJ\xC3O","ENGRENAGEM","SENSOR","CARGO"];for(let r of o)this.allWords.includes(r)||this.allWords.unshift(r);this.forcaService.setAllWords(this.allWords),this.aplicarFiltro()}static \u0275fac=function(r){return new(r||u)(b(B),b(j))};static \u0275cmp=C({type:u,selectors:[["app-forca-config"]],decls:126,vars:17,consts:[[1,"forca-admin","container","py-4"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"mb-0"],[1,"text-muted"],[1,"d-flex","gap-2","align-items-center"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-lg"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-gear"],[1,"btn-group"],[1,"btn","btn-outline-success",3,"click"],[1,"btn","btn-outline-info","mb-0"],["type","file","accept",".json","hidden","",3,"change"],[1,"row","mb-3"],[1,"col-md-6"],["placeholder","Pesquisar palavra...",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6","text-md-end","mt-2","mt-md-0"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"card","shadow-sm"],[1,"table-responsive"],[1,"table","mb-0","align-middle"],[1,"table-light"],[2,"width","60%"],[2,"width","20%"],[1,"text-end",2,"width","20%"],[4,"ngFor","ngForOf"],[4,"ngIf"],["id","wordModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content",3,"ngSubmit","formGroup"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"form-label"],["formControlName","palavra","placeholder","Ex: PNEU",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],[1,"mb-2","text-muted","small"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],["id","settingsModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"row","g-3"],["type","number","formControlName","timePerRound",1,"form-control"],["formControlName","resetOnCorrect",1,"form-select"],[3,"ngValue"],["type","number","formControlName","penaltySeconds",1,"form-control"],["type","number","formControlName","maxParts",1,"form-control"],["formControlName","allowAccents",1,"form-select"],["formControlName","allowCedilla",1,"form-select"],["formControlName","showHint",1,"form-select"],["formControlName","showLengthBeforeStart",1,"form-select"],[1,"text-end"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],["colspan","3",1,"text-center","py-4","text-muted"],[1,"text-danger","small","mt-1"]],template:function(r,n){if(r&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),i(4,"Forca \u2014 Configura\xE7\xE3o"),e(),t(5,"small",3),i(6,"Gerencie palavras, dificuldades e timer do jogo da Forca"),e()(),t(7,"div",4)(8,"button",5),m("click",function(){return n.novaPalavra()}),p(9,"i",6),i(10," Nova palavra"),e(),t(11,"button",7),m("click",function(){return n.abrirSettings()}),p(12,"i",8),i(13," Settings"),e(),t(14,"div",9)(15,"button",10),m("click",function(){return n.exportJson()}),i(16,"Exportar"),e(),t(17,"label",11),i(18," Importar "),t(19,"input",12),m("change",function(s){return n.importJson(s)}),e()()()()(),t(20,"div",13)(21,"div",14)(22,"input",15),x("ngModelChange",function(s){return w(n.filtro,s)||(n.filtro=s),s}),m("ngModelChange",function(){return n.aplicarFiltro()}),e()(),t(23,"div",16)(24,"button",17),m("click",function(){return n.adicionarExemplo()}),i(25,"Adicionar exemplos"),e()()(),t(26,"div",18)(27,"div",19)(28,"table",20)(29,"thead",21)(30,"tr")(31,"th",22),i(32,"Palavra"),e(),t(33,"th",23),i(34,"Tamanho"),e(),t(35,"th",24),i(36,"A\xE7\xF5es"),e()()(),t(37,"tbody"),_(38,z,10,2,"tr",25)(39,H,3,0,"tr",26),e()()()()(),t(40,"div",27)(41,"div",28)(42,"form",29),m("ngSubmit",function(){return n.salvarPalavra()}),t(43,"div",30)(44,"h5",31),i(45),e(),t(46,"button",32),m("click",function(){return n.wordModalInstance==null?null:n.wordModalInstance.hide()}),e()(),t(47,"div",33)(48,"div",34)(49,"label",35),i(50,"Palavra"),e(),p(51,"input",36),_(52,$,2,0,"div",37),e(),t(53,"div",38),i(54," Observa\xE7\xE3o: as palavras s\xE3o armazenadas em MAI\xDASCULAS. A valida\xE7\xE3o impede inser\xE7\xF5es vazias. "),e()(),t(55,"div",39)(56,"button",40),m("click",function(){return n.wordModalInstance==null?null:n.wordModalInstance.hide()}),i(57,"Cancelar"),e(),t(58,"button",41),i(59,"Salvar"),e()()()()(),t(60,"div",42)(61,"div",43)(62,"form",29),m("ngSubmit",function(){return n.salvarSettings()}),t(63,"div",30)(64,"h5",31),i(65,"Configura\xE7\xF5es - Forca"),e(),t(66,"button",32),m("click",function(){return n.settingsModalInstance==null?null:n.settingsModalInstance.hide()}),e()(),t(67,"div",33)(68,"div",44)(69,"div",14)(70,"label",35),i(71,"Tempo por rodada (segundos)"),e(),p(72,"input",45),e(),t(73,"div",14)(74,"label",35),i(75,"Resetar tempo ao acertar letra"),e(),t(76,"select",46)(77,"option",47),i(78,"Sim"),e(),t(79,"option",47),i(80,"N\xE3o"),e()()(),t(81,"div",14)(82,"label",35),i(83,"Penalidade por erro (segundos)"),e(),p(84,"input",48),e(),t(85,"div",14)(86,"label",35),i(87,"M\xE1ximo de partes do boneco (erros)"),e(),p(88,"input",49),e(),t(89,"div",14)(90,"label",35),i(91,"Permitir acentos (normalizar)"),e(),t(92,"select",50)(93,"option",47),i(94,"Sim"),e(),t(95,"option",47),i(96,"N\xE3o"),e()()(),t(97,"div",14)(98,"label",35),i(99,"Permitir \xC7"),e(),t(100,"select",51)(101,"option",47),i(102,"Sim"),e(),t(103,"option",47),i(104,"N\xE3o"),e()()(),t(105,"div",14)(106,"label",35),i(107,"Mostrar dica (ex.: primeira letra)"),e(),t(108,"select",52)(109,"option",47),i(110,"Sim"),e(),t(111,"option",47),i(112,"N\xE3o"),e()()(),t(113,"div",14)(114,"label",35),i(115,"Mostrar n\xFAmero de letras antes de iniciar"),e(),t(116,"select",53)(117,"option",47),i(118,"Sim"),e(),t(119,"option",47),i(120,"N\xE3o"),e()()()()(),t(121,"div",39)(122,"button",40),m("click",function(){return n.settingsModalInstance==null?null:n.settingsModalInstance.hide()}),i(123,"Cancelar"),e(),t(124,"button",41),i(125,"Salvar configura\xE7\xF5es"),e()()()()()),r&2){let a;l(22),F("ngModel",n.filtro),l(16),d("ngForOf",n.filteredWords),l(),d("ngIf",!n.filteredWords.length),l(3),d("formGroup",n.wordForm),l(3),g(n.editingIndex===null?"Nova palavra":"Editar palavra"),l(7),d("ngIf",((a=n.wordForm.get("palavra"))==null?null:a.touched)&&((a=n.wordForm.get("palavra"))==null?null:a.invalid)),l(10),d("formGroup",n.settingsForm),l(15),d("ngValue",!0),l(2),d("ngValue",!1),l(14),d("ngValue",!0),l(2),d("ngValue",!1),l(6),d("ngValue",!0),l(2),d("ngValue",!1),l(6),d("ngValue",!0),l(2),d("ngValue",!1),l(6),d("ngValue",!0),l(2),d("ngValue",!1)}},dependencies:[I,M,y,U,k,L,G,O,A,R,P,N,V,T,D,W],styles:['@charset "UTF-8";.forca-admin[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem}.card[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.table-responsive[_ngcontent-%COMP%]{max-height:60vh;overflow:auto}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{white-space:nowrap}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{border-radius:10px;padding:0}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:1rem 1.25rem}.modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:.75rem 1.25rem}']})};export{q as ForcaConfigComponent};
