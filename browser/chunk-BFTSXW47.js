import{a as R,b as G}from"./chunk-O5GQYPGG.js";import{a as F}from"./chunk-Y33K7AZW.js";import{a as W}from"./chunk-JWPH47B2.js";import{d as T,h as I}from"./chunk-PTHPNUVQ.js";import"./chunk-5BLSFZMB.js";import{b as q,d as z,g as L,i as N,l as j,m as A,n as D,t as B}from"./chunk-5VMU7HGZ.js";import{Ab as x,Ca as v,Db as p,Eb as C,Fb as f,Ga as l,Ob as y,Pa as b,T as u,U as m,Ua as w,Ya as M,a as P,db as g,eb as i,ec as U,fb as n,fc as V,gb as E,lc as k,mb as O,ob as _,qb as d,vb as S,zb as o}from"./chunk-D5XL275M.js";function H(c,r){if(c&1&&(i(0,"option",15),o(1),n()),c&2){let e=r.$implicit;g("value",e),l(),x(e)}}function J(c,r){if(c&1&&(i(0,"option",15),o(1),n()),c&2){let e=r.$implicit;g("value",e),l(),x(e)}}function K(c,r){if(c&1){let e=O();i(0,"div",6)(1,"label"),o(2,"Equipe"),n(),i(3,"select",7),f("ngModelChange",function(t){u(e);let a=d();return C(a.team,t)||(a.team=t),m(t)}),_("change",function(){u(e);let t=d();return m(t.onEquipeChange())}),i(4,"option",8),o(5,"Todas"),n(),M(6,J,2,2,"option",9),n()()}if(c&2){let e=d();l(3),p("ngModel",e.team),l(3),g("ngForOf",e.equipes)}}function Q(c,r){if(c&1){let e=O();i(0,"div",16)(1,"label"),o(2,"Pesquisar"),n(),i(3,"input",17),f("ngModelChange",function(t){u(e);let a=d();return C(a.search,t)||(a.search=t),m(t)}),_("input",function(){u(e);let t=d();return m(t.filtrarPesquisa())}),n()()}if(c&2){let e=d();l(3),p("ngModel",e.search)}}function X(c,r){if(c&1){let e=O();i(0,"tr")(1,"td"),E(2,"img",21),n(),i(3,"td")(4,"strong",22),o(5),n()(),i(6,"td"),o(7),n(),i(8,"td"),o(9),n(),i(10,"td",23),o(11),n(),i(12,"td",24)(13,"button",25),_("click",function(){let t=u(e).$implicit,a=d(2);return m(a.abrirModal(t))}),o(14,"Editar"),n(),i(15,"button",26),_("click",function(){let t=u(e).$implicit,a=d(2);return m(a.loginComo(t))}),o(16,"Login"),n(),i(17,"button",27),_("click",function(){let t=u(e).$implicit,a=d(2);return m(a.abrirPerfil(t))}),o(18,"Perfil"),n()()()}if(c&2){let e=r.$implicit;l(2),g("src",e.avatar,v),l(3),x(e.nome),l(2),x(e.comunidade),l(2),x(e.tribo||"-"),l(2),x(e.maxCoin)}}function Z(c,r){if(c&1&&(i(0,"table",18)(1,"thead")(2,"tr")(3,"th"),o(4,"Avatar"),n(),i(5,"th"),o(6,"Nome"),n(),i(7,"th"),o(8,"Setor"),n(),i(9,"th"),o(10,"Equipe"),n(),i(11,"th"),o(12,"MaxCoins"),n(),i(13,"th",19),o(14,"A\xE7\xF5es"),n()()(),i(15,"tbody"),M(16,X,19,5,"tr",20),n()()),c&2){let e=d();l(16),g("ngForOf",e.usuariosFiltrados)}}function $(c,r){c&1&&(i(0,"div",28)(1,"div",29),o(2,"\u{1F50D}"),n(),o(3," Nenhum usu\xE1rio encontrado. "),n())}function ee(c,r){if(c&1){let e=O();i(0,"div",30)(1,"div",31)(2,"div",32)(3,"h5"),o(4,"Editar Usu\xE1rio"),n(),i(5,"button",33),_("click",function(){u(e);let t=d();return m(t.fecharModal())}),o(6,"\u2715"),n()(),i(7,"div",34)(8,"div",35)(9,"label",36),o(10,"Nome"),n(),i(11,"input",37),f("ngModelChange",function(t){u(e);let a=d();return C(a.usuarioEdicao.nome,t)||(a.usuarioEdicao.nome=t),m(t)}),n()(),i(12,"div",35)(13,"label",36),o(14,"Frase"),n(),i(15,"input",37),f("ngModelChange",function(t){u(e);let a=d();return C(a.usuarioEdicao.frase,t)||(a.usuarioEdicao.frase=t),m(t)}),n()(),i(16,"div",35)(17,"label",36),o(18,"Hobbies"),n(),i(19,"input",37),f("ngModelChange",function(t){u(e);let a=d();return C(a.usuarioEdicao.hobbies,t)||(a.usuarioEdicao.hobbies=t),m(t)}),n()(),i(20,"div",35)(21,"label",36),o(22,"Interesses"),n(),i(23,"input",37),f("ngModelChange",function(t){u(e);let a=d();return C(a.usuarioEdicao.interesses,t)||(a.usuarioEdicao.interesses=t),m(t)}),n()(),i(24,"div",35)(25,"label",36),o(26,"MaxCoins"),n(),i(27,"input",38),f("ngModelChange",function(t){u(e);let a=d();return C(a.usuarioEdicao.maxCoin,t)||(a.usuarioEdicao.maxCoin=t),m(t)}),n()()(),i(28,"div",39)(29,"button",40),_("click",function(){u(e);let t=d();return m(t.fecharModal())}),o(30,"Cancelar"),n(),i(31,"button",41),_("click",function(){u(e);let t=d();return m(t.salvarEdicao())}),o(32,"Salvar"),n()()()()}if(c&2){let e=d();l(11),p("ngModel",e.usuarioEdicao.nome),l(4),p("ngModel",e.usuarioEdicao.frase),l(4),p("ngModel",e.usuarioEdicao.hobbies),l(4),p("ngModel",e.usuarioEdicao.interesses),l(4),p("ngModel",e.usuarioEdicao.maxCoin)}}var Y=class c{constructor(r,e,s,t,a){this.usuariosService=r;this.loginService=e;this.router=s;this.comunidadesService=t;this.tribosService=a}setores=[];equipes=[];sector="";team="";search="";usuariosFiltrados=[];usuariosOriginais=[];usuarioEdicao=null;modalAberto=!1;ngOnInit(){this.comunidadesService.getComunidades().subscribe(r=>this.setores=r.map(e=>e.nome))}onSetorChange(){if(this.team="",this.search="",!this.sector){this.usuariosFiltrados=[],this.usuariosOriginais=[];return}this.sector==="Central de Atendimento"?this.tribosService.getTribos().subscribe(r=>this.equipes=r.map(e=>e.nome)):this.equipes=[],this.carregarUsuarios()}carregarUsuarios(){this.usuariosService.getUsuarios().subscribe(r=>{let e=r.filter(s=>s.comunidade===this.sector);this.usuariosOriginais=e,this.usuariosFiltrados=e})}onEquipeChange(){if(!this.team){this.usuariosFiltrados=[...this.usuariosOriginais];return}this.usuariosFiltrados=this.usuariosOriginais.filter(r=>r.tribo===this.team)}filtrarPesquisa(){let r=this.search.toLowerCase().trim();this.usuariosFiltrados=this.usuariosOriginais.filter(e=>e.nome.toLowerCase().includes(r)||(e.tribo??"").toLowerCase().includes(r))}abrirModal(r){this.usuarioEdicao=P({},r),this.modalAberto=!0}fecharModal(){this.modalAberto=!1,this.usuarioEdicao=null}salvarEdicao(){if(!this.usuarioEdicao)return;let r=this.usuariosOriginais.findIndex(e=>e.id===this.usuarioEdicao.id);this.usuariosOriginais[r]=P({},this.usuarioEdicao),this.onEquipeChange(),this.fecharModal()}loginComo(r){this.loginService.saveUser(r),this.router.navigate(["/inicio"])}abrirPerfil(r){this.usuariosService.navigateToPerfil(r)}static \u0275fac=function(e){return new(e||c)(b(F),b(W),b(T),b(R),b(G))};static \u0275cmp=w({type:c,selectors:[["app-usuarios"]],decls:22,vars:7,consts:[["vazio",""],[1,"users-admin"],[1,"header"],[1,"title"],[1,"subtitle"],[1,"header-right"],[1,"select-wrap"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","select-wrap",4,"ngIf"],["class","search-wrap",4,"ngIf"],[1,"content"],["class","users-table",4,"ngIf","ngIfElse"],["class","users-modal-backdrop",4,"ngIf"],[3,"value"],[1,"search-wrap"],["type","text","placeholder","Nome ou equipe...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"users-table"],[2,"width","240px"],[4,"ngFor","ngForOf"],[1,"avatar-sm",3,"src"],[1,"u-name"],[1,"coins"],[1,"actions"],[1,"btn","btn-edit",3,"click"],[1,"btn","btn-login",3,"click"],[1,"btn","btn-perfil",3,"click"],[1,"empty-state"],[1,"emoji"],[1,"users-modal-backdrop"],[1,"users-modal"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],[1,"form-row"],[1,"form-label"],[1,"form-control",3,"ngModelChange","ngModel"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-save",3,"click"]],template:function(e,s){if(e&1){let t=O();i(0,"div",1)(1,"div",2)(2,"div")(3,"h2",3),o(4,"Gest\xE3o de Usu\xE1rios"),n(),i(5,"p",4),o(6,"Gerencie setores, equipes e edite perfis rapidamente."),n()(),i(7,"div",5)(8,"div",6)(9,"label"),o(10,"Setor"),n(),i(11,"select",7),f("ngModelChange",function(h){return u(t),C(s.sector,h)||(s.sector=h),m(h)}),_("change",function(){return u(t),m(s.onSetorChange())}),i(12,"option",8),o(13,"Selecione..."),n(),M(14,H,2,2,"option",9),n()(),M(15,K,7,2,"div",10)(16,Q,4,1,"div",11),n()(),i(17,"div",12),M(18,Z,17,1,"table",13)(19,$,4,0,"ng-template",null,0,y),n()(),M(21,ee,33,5,"div",14)}if(e&2){let t=S(20);l(11),p("ngModel",s.sector),l(3),g("ngForOf",s.setores),l(),g("ngIf",s.equipes.length>0),l(),g("ngIf",s.usuariosOriginais.length>0),l(2),g("ngIf",s.usuariosFiltrados.length>0)("ngIfElse",t),l(3),g("ngIf",s.modalAberto)}},dependencies:[k,U,V,B,A,D,q,N,j,z,L,I],styles:[".users-admin[_ngcontent-%COMP%]{max-width:1300px;margin:0 auto;padding:20px;color:#213243}.users-admin[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;gap:1rem}.users-admin[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#123}.users-admin[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.9rem;color:#6b7a8a;margin-top:-6px}.users-admin[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;gap:18px}.users-admin[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .select-wrap[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .users-admin[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .search-wrap[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#6b7a8a;margin-bottom:4px}.users-admin[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .select-wrap[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .users-admin[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .search-wrap[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{min-width:180px;padding:.45rem .6rem;border-radius:6px;border:1px solid #dce3eb;background:#fff}.users-admin[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]{width:100%;margin-top:24px;border-collapse:collapse;background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 4px 18px #0c204012}.users-admin[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f1f5fb}.users-admin[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px;text-align:left;font-size:.82rem;color:#6b7a8a;text-transform:uppercase;letter-spacing:.04em}.users-admin[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .12s ease}.users-admin[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fbff}.users-admin[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px;font-size:.9rem;color:#1d2e44;border-top:1px solid #eef2f7}.users-admin[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.coins[_ngcontent-%COMP%]{font-weight:700;color:#0d6efd}.users-admin[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .avatar-sm[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:6px;object-fit:cover;border:1px solid #e2e8f0;box-shadow:0 2px 6px #0c223c0f}.users-admin[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.users-admin[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:6px 12px;border-radius:6px;font-size:.82rem;cursor:pointer;border:none;transition:.15s ease}.users-admin[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#0d6efd;color:#fff}.users-admin[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]{background:#198754;color:#fff}.users-admin[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-perfil[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.users-admin[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{opacity:.85}.users-admin[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{margin-top:40px;text-align:center;padding:40px;background:#f8fbff;border-radius:12px;border:1px dashed #cbd9e8;color:#5c6a7d}.users-admin[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .emoji[_ngcontent-%COMP%]{font-size:38px;margin-bottom:8px}.users-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0e182873;display:flex;justify-content:center;align-items:center;z-index:5000}.users-modal[_ngcontent-%COMP%]{width:650px;background:#fff;border-radius:10px;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .14s ease}.users-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{padding:14px 18px;border-bottom:1px solid #e6edf5;display:flex;justify-content:space-between}.users-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;color:#123;font-size:1rem}.users-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{border:none;background:transparent;font-size:1.2rem;cursor:pointer;padding:4px;color:#6c7a8a;transition:.1s}.users-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{color:#1a2a44}.users-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:18px}.users-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:12px}.users-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.78rem;color:#6b7a8a;margin-bottom:4px}.users-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:8px 10px;border-radius:6px;border:1px solid #dce3eb}.users-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:14px 18px;border-top:1px solid #e6edf5;display:flex;justify-content:flex-end;gap:12px}.users-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 14px;border-radius:6px;border:none;cursor:pointer;font-size:.86rem}.users-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#e4e9f1;color:#223048}.users-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#0d6efd;color:#fff}@keyframes _ngcontent-%COMP%_fadeIn{0%{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}"]})};export{Y as UsuariosComponent};
