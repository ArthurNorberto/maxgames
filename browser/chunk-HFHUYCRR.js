import{a as H,b as J}from"./chunk-F2Y7FIBY.js";import{a as R}from"./chunk-Y33K7AZW.js";import"./chunk-JWPH47B2.js";import"./chunk-PTHPNUVQ.js";import"./chunk-5BLSFZMB.js";import{b as W,d as $,g as q,t as G}from"./chunk-5VMU7HGZ.js";import{$ as v,Ab as P,Ca as k,Db as z,Eb as D,Fb as B,Ga as a,Hb as N,Lb as A,Mb as j,Pa as I,T as u,U as b,Ua as _,Ya as f,cb as T,db as p,dc as L,eb as o,ec as h,fb as r,fc as M,gb as d,ic as Y,lc as C,mb as x,ob as l,qb as g,wb as E,xb as V,yb as U,zb as m}from"./chunk-D5XL275M.js";function Z(i,e){if(i&1){let t=x();o(0,"div",17)(1,"div",18),l("click",function(s){return u(t),g().setVisibilidade("universo"),b(s.stopPropagation())}),d(2,"i",19),m(3," Universo "),r(),o(4,"div",18),l("click",function(s){return u(t),g().setVisibilidade("tribo"),b(s.stopPropagation())}),d(5,"i",20),m(6," Tribo "),r(),o(7,"div",18),l("click",function(s){return u(t),g().setVisibilidade("comunidade"),b(s.stopPropagation())}),d(8,"i",21),m(9," Comunidade "),r()()}}function K(i,e){if(i&1){let t=x();o(0,"div",22),d(1,"img",23),o(2,"button",24),l("click",function(){u(t);let s=g();return b(s.removerImagem())}),m(3,"\xD7"),r()()}if(i&2){let t=g();a(),p("src",t.previewImage,k)}}var O=class i{user;publicarPost=new v;toggleSelect=!1;visibilidade="universo";text="";imageFile=null;previewImage=null;audienceIcon="bi bi-globe2";ngOnInit(){document.addEventListener("click",()=>{this.toggleSelect=!1})}onFileSelected(e){let t=e.target.files[0];if(!t)return;this.imageFile=t;let n=new FileReader;n.onload=()=>this.previewImage=n.result,n.readAsDataURL(t)}setVisibilidade(e){this.visibilidade=e,this.toggleSelect=!1;let t={universo:"bi bi-globe2",tribo:"bi bi-diagram-3",comunidade:"bi bi-people"};this.audienceIcon=t[e]}onSelectorClick(e){e.stopPropagation(),this.toggleSelect=!this.toggleSelect}removerImagem(){this.imageFile=null,this.previewImage=null}updateIcon(){let e={universo:"bi bi-globe2",tribo:"bi bi-diagram-3",comunidade:"bi bi-people"};this.audienceIcon=e[this.visibilidade]}publicar(){if(!this.user||!this.text.trim()&&!this.previewImage)return;let e={id:this.generateUUID(),userId:this.user.id,userNome:this.user.nome,avatar:this.user.avatar,userComunidade:this.user.comunidade,userTribo:this.user.tribo,type:"texto",visibilidade:this.visibilidade,message:this.text.trim()||void 0,imageUrl:this.previewImage||void 0,createdAt:new Date().toISOString(),interactions:{likes:0,comments:0,shares:0,likedByUser:!1}};this.publicarPost.emit(e),this.text="",this.previewImage=null,this.imageFile=null,this.visibilidade="universo"}generateUUID(){let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,[...e].map(t=>t.toString(16).padStart(2,"0")).join("")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-post-box"]],inputs:{user:"user"},outputs:{publicarPost:"publicarPost"},decls:24,vars:10,consts:[[1,"post-box","card"],[1,"header"],[1,"avatar",3,"src"],[1,"right-side"],[1,"user-name"],[1,"audience-selector",3,"click"],[3,"ngClass"],[1,"bi","bi-chevron-down","chevron"],["class","audience-dropdown",4,"ngIf"],["placeholder","Compartilhe algo com o pessoal da Max Play...",1,"post-textarea",3,"ngModelChange","ngModel"],["class","image-preview",4,"ngIf"],[1,"bottom"],[1,"actions"],[1,"upload-btn"],[1,"bi","bi-image"],["type","file","accept","image/*","hidden","",3,"change"],[3,"click","disabled"],[1,"audience-dropdown"],[1,"item",3,"click"],[1,"bi","bi-globe2"],[1,"bi","bi-diagram-3"],[1,"bi","bi-people"],[1,"image-preview"],["alt","preview",3,"src"],[1,"remove-img",3,"click"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1),d(2,"img",2),o(3,"div",3)(4,"div",4),m(5),r(),o(6,"div",5),l("click",function(c){return n.onSelectorClick(c)}),d(7,"i",6),o(8,"span"),m(9),A(10,"titlecase"),r(),d(11,"i",7),f(12,Z,10,0,"div",8),r()()(),o(13,"textarea",9),B("ngModelChange",function(c){return D(n.text,c)||(n.text=c),c}),r(),f(14,K,4,1,"div",10),o(15,"div",11)(16,"div",12)(17,"label",13),d(18,"i",14),o(19,"span"),m(20,"Foto"),r(),o(21,"input",15),l("change",function(c){return n.onFileSelected(c)}),r()(),o(22,"button",16),l("click",function(){return n.publicar()}),m(23," Publicar "),r()()()()),t&2&&(a(2),p("src",n.user==null?null:n.user.avatar,k),a(3),P(n.user==null?null:n.user.nome),a(2),p("ngClass",n.audienceIcon),a(2),P(j(10,8,n.visibilidade)),a(3),p("ngIf",n.toggleSelect),a(),z("ngModel",n.text),a(),p("ngIf",n.previewImage),a(8),p("disabled",n.text.trim().length===0&&!n.previewImage))},dependencies:[C,L,M,G,W,$,q,Y],styles:[".post-box[_ngcontent-%COMP%]{background:#fff;padding:18px;border-radius:14px;margin-bottom:20px;box-shadow:0 4px 12px #00336614}.post-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px}.post-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:2px solid #003366;object-fit:cover}.post-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:1}.post-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:700;margin-bottom:4px;color:#036}.post-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .audience-selector[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;background:#f0f2f5;padding:6px 12px;border-radius:8px;font-size:.85rem;border:1px solid #d0d7df;position:relative;cursor:pointer;-webkit-user-select:none;user-select:none}.post-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .audience-selector[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#036}.post-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .audience-selector[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{font-size:12px;opacity:.6}.post-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .audience-selector[_ngcontent-%COMP%]   .audience-dropdown[_ngcontent-%COMP%]{position:absolute;top:38px;left:0;background:#fff;border:1px solid #ddd;border-radius:8px;width:150px;box-shadow:0 6px 16px #0000001a;z-index:20}.post-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .audience-selector[_ngcontent-%COMP%]   .audience-dropdown[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:10px 12px;display:flex;align-items:center;gap:8px;cursor:pointer;font-size:.9rem}.post-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .audience-selector[_ngcontent-%COMP%]   .audience-dropdown[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{background:#f4f6f9}.post-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .audience-selector[_ngcontent-%COMP%]   .audience-dropdown[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#036}.post-box[_ngcontent-%COMP%]   .post-textarea[_ngcontent-%COMP%]{width:100%;min-height:120px;margin-top:12px;padding:12px;border-radius:12px;border:1px solid #ddd;background:#f4f6f9;font-size:1rem;resize:vertical;transition:.2s}.post-box[_ngcontent-%COMP%]   .post-textarea[_ngcontent-%COMP%]:focus{border-color:#036;background:#fff;box-shadow:0 0 0 2px #00336626;outline:none}.post-box[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{margin-top:12px;position:relative}.post-box[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 3px 10px #00000026}.post-box[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .remove-img[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:#000000a6;color:#fff;border:none;width:26px;height:26px;border-radius:50%;cursor:pointer;font-size:18px;line-height:24px}.post-box[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .remove-img[_ngcontent-%COMP%]:hover{background:#000000d9}.post-box[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]{margin-top:14px}.post-box[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.post-box[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;background:#f0f2f5;border-radius:12px;font-size:.95rem;font-weight:600;color:#036;cursor:pointer;border:1px solid #e0e0e0;transition:background .2s,transform .2s}.post-box[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.post-box[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]:hover{background:#e7eaee;transform:translateY(-1px)}.post-box[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#036;color:#fff;padding:8px 20px;border-radius:10px;border:none;font-weight:600;cursor:pointer;transition:.2s}.post-box[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#00264d}.post-box[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#8fa5b6;cursor:default}"]})};function ee(i,e){if(i&1){let t=x();o(0,"button",3),l("click",function(){let s=u(t).$implicit,c=g();return b(c.setTab(s.key))}),d(1,"i"),o(2,"span"),m(3),r()()}if(i&2){let t=e.$implicit,n=g();V("active",n.active===t.key),T("aria-selected",n.active===t.key),a(),U(N("bi ",t.icon)),a(2),P(t.label)}}var w=class i{tabs=[{key:"universo",label:"Universo",icon:"bi-globe"},{key:"tribo",label:"Tribo",icon:"bi-people"},{key:"comunidade",label:"Comunidade",icon:"bi-building"}];active="universo";tabChange=new v;setTab(e){this.active=e,this.tabChange.emit(e)}getSliderPosition(){return`${this.tabs.findIndex(t=>t.key===this.active)*(100/this.tabs.length)}%`}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-feed-tabs"]],outputs:{tabChange:"tabChange"},decls:3,vars:5,consts:[["role","tablist","aria-label","Filtrar feed",1,"tabs-container"],["class","tab","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"slider"],["role","tab",1,"tab",3,"click"]],template:function(t,n){t&1&&(o(0,"nav",0),f(1,ee,4,7,"button",1),d(2,"div",2),r()),t&2&&(a(),p("ngForOf",n.tabs),a(),E("width",100/n.tabs.length,"%")("left",n.getSliderPosition()))},dependencies:[C,h],styles:["[_nghost-%COMP%]{display:block}.tabs-container[_ngcontent-%COMP%]{position:relative;display:flex;gap:6px;background:#fff;padding:6px;border-radius:12px;box-shadow:0 6px 18px #0230560f;align-items:center;margin:14px 0;-webkit-user-select:none;user-select:none}.tab[_ngcontent-%COMP%]{flex:1;background:transparent;border:none;padding:10px 6px;font-weight:600;color:#5b7078;cursor:pointer;border-radius:10px;display:flex;align-items:center;justify-content:center;gap:6px;transition:color .18s ease,transform .12s ease,background .2s ease;position:relative;z-index:2;font-size:.95rem}.tab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;opacity:.85;transition:transform .2s ease}.tab[_ngcontent-%COMP%]:hover{color:#036;transform:translateY(-2px)}.tab.active[_ngcontent-%COMP%]{color:#036;font-weight:700}.tab.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scale(1.15)}.slider[_ngcontent-%COMP%]{position:absolute;bottom:4px;height:4px;background:linear-gradient(90deg,#ffd100,#ffb84d);border-radius:4px;transition:left .25s cubic-bezier(.2,.9,.2,1);z-index:1}"]})};function te(i,e){if(i&1){let t=x();o(0,"app-post-box",6),l("publicarPost",function(s){u(t);let c=g();return b(c.handlePublicar(s))}),r()}if(i&2){let t=g();p("user",t.user)}}function ne(i,e){i&1&&(o(0,"div",7),m(1,"Carregando feed..."),r())}function ie(i,e){i&1&&(o(0,"div",8),m(1," Ainda sem atividades \u2014 jogue e apare\xE7a aqui! "),r())}function oe(i,e){if(i&1){let t=x();o(0,"div")(1,"app-post-item",9),l("like",function(){let s=u(t).$implicit,c=g();return b(c.likePost(s))}),r()()}if(i&2){let t=e.$implicit;a(),p("post",t)("showVisibility",!0)("showActions",!0)}}var y=class i{constructor(e,t){this.feedService=e;this.usuarioService=t}posts=[];filtered=[];loading=!0;user;activeTab="universo";ngOnInit(){this.usuarioService.getUsuarioAtual().subscribe(e=>{this.user=e,this.applyFilter()}),this.feedService.getFeed().subscribe(e=>{this.posts=e,this.applyFilter(),this.loading=!1})}handlePublicar(e){this.posts.unshift(e),this.applyFilter()}onTabChange(e){(e==="universo"||e==="tribo"||e==="comunidade")&&(this.activeTab=e,this.applyFilter())}applyFilter(){switch(this.activeTab){case"universo":this.filtered=this.posts.filter(e=>e.visibilidade==="universo");break;case"tribo":this.filtered=this.posts.filter(e=>e.visibilidade==="tribo"&&e.userTribo===this.user?.tribo);break;case"comunidade":this.filtered=this.posts.filter(e=>e.visibilidade==="comunidade"&&e.userComunidade===this.user?.comunidade);break}}likePost(e){console.log("LIKE",e.id)}static \u0275fac=function(t){return new(t||i)(I(H),I(R))};static \u0275cmp=_({type:i,selectors:[["app-feed"]],decls:6,vars:4,consts:[["role","main","aria-live","polite",1,"feed"],[3,"user","publicarPost",4,"ngIf"],[3,"tabChange"],["class","loading",4,"ngIf"],["class","empty",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"publicarPost","user"],[1,"loading"],[1,"empty"],[3,"like","post","showVisibility","showActions"]],template:function(t,n){t&1&&(o(0,"section",0),f(1,te,1,1,"app-post-box",1),o(2,"app-feed-tabs",2),l("tabChange",function(c){return n.onTabChange(c)}),r(),f(3,ne,2,0,"div",3)(4,ie,2,0,"div",4)(5,oe,2,3,"div",5),r()),t&2&&(a(),p("ngIf",n.user),a(2),p("ngIf",n.loading),a(),p("ngIf",!n.loading&&n.filtered.length===0),a(),p("ngForOf",n.filtered))},dependencies:[C,h,M,O,J,w],styles:['@charset "UTF-8";.feed[_ngcontent-%COMP%]{display:block;max-width:980px;margin:0 auto;padding:0 12px}.loading[_ngcontent-%COMP%], .empty[_ngcontent-%COMP%]{color:#6b7b84;padding:12px;text-align:center;margin:8px 0 12px}.empty[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 6px 18px #02305608}app-post-box[_ngcontent-%COMP%]{margin-bottom:8px}.feed-transition[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeUp .28s ease}@keyframes _ngcontent-%COMP%_fadeUp{0%{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}']})};var X=class i{constructor(){}ngOnInit(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-inicio"]],decls:1,vars:0,template:function(t,n){t&1&&d(0,"app-feed")},dependencies:[C,y],styles:['@charset "UTF-8";.inicio-wrapper[_ngcontent-%COMP%]{padding:20px 0}.layout-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:260px 1fr 280px;gap:22px;align-items:start;max-width:1200px;margin:0 auto;padding:20px}@media(max-width:992px){.layout-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:14px}}']})};export{X as InicioComponent};
