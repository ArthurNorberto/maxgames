import{a as W}from"./chunk-CF4GS5VF.js";import{h as F}from"./chunk-PTHPNUVQ.js";import"./chunk-5BLSFZMB.js";import{b as N,d as V,g as j,t as R}from"./chunk-5VMU7HGZ.js";import{Ab as p,Bb as b,Db as k,Eb as I,Fb as T,Ga as a,Lb as f,Mb as u,Pa as y,T as M,U as h,Ua as w,Ya as x,cb as C,db as d,eb as t,ec as A,fb as n,fc as z,gb as v,hc as B,kb as P,lb as O,lc as D,mb as S,ob as m,qb as g,wb as E,xb as _,zb as i}from"./chunk-D5XL275M.js";function Y(l,r){if(l&1&&(P(0),v(1,"progress",17),O()),l&2){let e=r.ngIf,o=g(2);a(),d("value",o.getAverageProgress(e))}}function U(l,r){if(l&1&&(P(0),x(1,Y,2,1,"ng-container",12),f(2,"async"),O()),l&2){let e=g();a(),d("ngIf",u(2,1,e.metasAtivas))}}function $(l,r){if(l&1){let e=S();t(0,"article",18)(1,"div",19)(2,"div",20)(3,"h3"),i(4),n(),t(5,"span",21),i(6),n()(),t(7,"div",22)(8,"button",23),m("click",function(){let s=M(e).$implicit,c=g();return h(c.addProgress(s,15))}),i(9," +15% "),n(),t(10,"button",24),m("click",function(){let s=M(e).$implicit,c=g();return h(c.toggleComplete(s))}),i(11),n()()(),t(12,"p",25),i(13),n(),t(14,"div",26)(15,"div",27),v(16,"div",28),n(),t(17,"div",29),i(18),n()(),t(19,"div",30)(20,"div",31),i(21," Recompensa: "),t(22,"strong"),i(23),n()(),t(24,"div",32),i(25),n()()()}if(l&2){let e=r.$implicit;C("aria-complete",e.completed),a(4),p(e.title),a(2),p(e.target),a(2),d("disabled",e.completed),a(3),b(" ",e.completed?"Desmarcar":"Concluir"," "),a(2),p(e.description),a(2),C("aria-valuenow",e.progress),a(),E("width",e.progress,"%"),a(2),b(" ",e.progress,"% "),a(5),p(e.reward),a(),_("done",e.completed),a(),b(" ",e.completed?"COMPLETA":"Em andamento"," ")}}var L=class l{constructor(r){this.metasService=r}activeTab="daily";search="";filtered;metasAtivas;completedMetasCount=0;ngOnInit(){this.updateStreams()}updateStreams(){this.filtered=this.metasService.filterMetas(this.activeTab,this.search),this.metasAtivas=this.metasService.getMetasByType(this.activeTab),this.metasAtivas.subscribe(r=>{this.completedMetasCount=r.filter(e=>e.completed).length})}getAverageProgress(r){return!r||r.length===0?0:r.reduce((o,s)=>o+s.progress,0)/r.length}switchTab(r){this.activeTab=r,this.updateStreams()}toggleComplete(r){this.metasService.toggleComplete(r)}addProgress(r,e=10){this.metasService.addProgress(r,e)}static \u0275fac=function(e){return new(e||l)(y(W))};static \u0275cmp=w({type:l,selectors:[["app-metas"]],decls:43,vars:16,consts:[[1,"metas-page"],[1,"metas-hero","fade-in"],[1,"hero-left"],[1,"lead"],[1,"hero-right"],[1,"tabs"],[3,"click"],[1,"search"],["type","search","placeholder","Buscar meta, descri\xE7\xE3o ou target...",3,"ngModelChange","input","ngModel"],[1,"metas-content"],[1,"summary-card","card"],[1,"summary-progress"],[4,"ngIf"],[1,"muted"],[1,"list-card"],[1,"grid"],["class","meta-card",4,"ngFor","ngForOf"],["max","100",3,"value"],[1,"meta-card"],[1,"meta-head"],[1,"meta-title"],[1,"meta-tag"],[1,"meta-actions"],["title","Adicionar progresso",1,"btn-icon",3,"click","disabled"],[1,"btn-complete",3,"click"],[1,"meta-desc"],[1,"progress-row"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"progress-fill"],[1,"progress-value"],[1,"meta-footer"],[1,"reward"],[1,"status"]],template:function(e,o){if(e&1&&(t(0,"main",0)(1,"header",1)(2,"div",2)(3,"h1"),i(4,"Metas"),n(),t(5,"p",3),i(6,"Acompanhe suas metas di\xE1rias e mensais \u2014 comprometa-se, evolua e ganhe MaxCoins."),n()(),t(7,"div",4)(8,"div",5)(9,"button",6),m("click",function(){return o.switchTab("daily")}),i(10,"Di\xE1rias"),n(),t(11,"button",6),m("click",function(){return o.switchTab("monthly")}),i(12,"Mensais"),n()(),t(13,"div",7)(14,"input",8),T("ngModelChange",function(c){return I(o.search,c)||(o.search=c),c}),m("input",function(){return o.updateStreams()}),n()()()(),t(15,"section",9)(16,"aside",10)(17,"h4"),i(18,"Resumo"),n(),t(19,"p"),i(20,"Abas: "),t(21,"strong"),i(22),n()(),t(23,"p"),i(24," Total metas: "),t(25,"strong"),i(26),f(27,"async"),n()(),t(28,"p"),i(29," Completas: "),t(30,"strong"),i(31),n()(),t(32,"div",11)(33,"label"),i(34,"Progresso m\xE9dio"),n(),x(35,U,3,3,"ng-container",12),f(36,"async"),n(),t(37,"small",13),i(38,"Participe regularmente para acumular MaxCoins."),n()(),t(39,"section",14)(40,"div",15),x(41,$,26,14,"article",16),f(42,"async"),n()()()()),e&2){let s;a(9),_("active",o.activeTab==="daily"),a(2),_("active",o.activeTab==="monthly"),a(3),k("ngModel",o.search),a(8),p(o.activeTab==="daily"?"Di\xE1rias":"Mensais"),a(4),p((s=u(27,10,o.metasAtivas))==null?null:s.length),a(5),p(o.completedMetasCount),a(4),d("ngIf",u(36,12,o.metasAtivas)),a(6),d("ngForOf",u(42,14,o.filtered))}},dependencies:[D,A,z,F,R,N,V,j,B],styles:["[_nghost-%COMP%]{display:block;font-family:Segoe UI,sans-serif;color:#036}.metas-hero[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px;align-items:center;padding:22px;background:linear-gradient(90deg,#00336608,#00336605);border-radius:12px;margin-bottom:20px;box-shadow:0 8px 24px #0033660a}.hero-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;letter-spacing:-.5px;color:#036}.lead[_ngcontent-%COMP%]{margin:6px 0 0;color:#546b75}.hero-right[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:1px solid transparent;padding:8px 14px;border-radius:8px;font-weight:700;color:#036;cursor:pointer;transition:all .15s ease}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#036;color:#fff;box-shadow:0 6px 18px #0033661f}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border-radius:8px;border:1px solid #e1e6ea;width:260px}.metas-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:320px 1fr;gap:20px;margin-top:20px}.summary-card.card[_ngcontent-%COMP%]{padding:18px;border-radius:12px;text-align:left;border-left:4px solid #003366}.summary-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px}.summary-progress[_ngcontent-%COMP%]{margin-top:12px}summary-progress[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#5b7078}progress[_ngcontent-%COMP%]{width:100%;height:10px;-webkit-appearance:none;appearance:none;border-radius:8px;overflow:hidden}progress[_ngcontent-%COMP%]::-webkit-progress-bar{background:#eef3f6;border-radius:8px}progress[_ngcontent-%COMP%]::-webkit-progress-value{background:linear-gradient(90deg,#ffd100,#e6b800)}.list-card[_ngcontent-%COMP%]{min-height:200px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:16px}.meta-card[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:12px;border:1px solid #e9eef2;box-shadow:0 6px 20px #0033660a;display:flex;flex-direction:column;gap:10px;transition:transform .18s ease,box-shadow .18s ease;position:relative;overflow:hidden}.meta-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 16px 40px #00336614}.meta-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:12px}.meta-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.05rem;color:#036}.meta-tag[_ngcontent-%COMP%]{display:inline-block;margin-top:6px;padding:4px 8px;background:#f2f6f8;color:#5b7078;border-radius:8px;font-size:12px}.meta-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:1px dashed #cfdbe2;padding:6px 8px;border-radius:8px;cursor:pointer;color:#036;font-weight:700}.btn-icon[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-complete[_ngcontent-%COMP%]{background:linear-gradient(90deg,#036,#00294d);color:#fff;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:800;transition:transform .12s ease}.btn-complete[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.meta-desc[_ngcontent-%COMP%]{margin:0;color:#5b7078;font-size:.95rem}.progress-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.progress-bar[_ngcontent-%COMP%]{flex:1;height:12px;background:#eef3f6;border-radius:8px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ffd100,#e6b800);width:0%;transition:width .6s cubic-bezier(.2,.9,.2,1);box-shadow:0 6px 18px #ffd1001f inset}.progress-value[_ngcontent-%COMP%]{min-width:44px;text-align:right;font-weight:800;color:#036}.meta-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:6px}.meta-footer[_ngcontent-%COMP%]   .reward[_ngcontent-%COMP%]{color:#5b7078;font-size:.95rem}.meta-footer[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-weight:800;color:#036;font-size:.85rem;padding:6px 8px;border-radius:8px;background:#f2f6f8}.meta-footer[_ngcontent-%COMP%]   .status.done[_ngcontent-%COMP%]{background:linear-gradient(90deg,#e6ffe6,#d4ffd4);color:#0a7a00;box-shadow:0 6px 18px #0080220f}@media(max-width:900px){.metas-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.hero-right[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end;gap:8px}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.fade-in[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn .8s forwards ease-out}@keyframes _ngcontent-%COMP%_fadeIn{to{opacity:1}}"]})};export{L as MetasComponent};
