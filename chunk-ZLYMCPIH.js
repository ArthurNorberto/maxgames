import{a as W}from"./chunk-CF4GS5VF.js";import{a as T,b as D,c,d as V,e as j,h as $,i as z,j as B,k as G,l as q,m as L,n as R,o as U,p as H,s as J,t as K,u as Q}from"./chunk-5VMU7HGZ.js";import{Ab as u,Bb as C,Ga as s,Lb as k,Mb as F,Pa as b,T as f,U as x,Ua as P,Ya as y,db as _,eb as e,ec as N,fb as t,gb as m,h as g,hc as A,lc as I,mb as w,o as O,ob as d,p as S,qb as M,wb as E,xb as h,zb as n}from"./chunk-D5XL275M.js";function Y(p,r){if(p&1){let i=w();e(0,"tr")(1,"td"),n(2),t(),e(3,"td"),n(4),t(),e(5,"td")(6,"div",25),m(7,"div",26),t(),e(8,"span",27),n(9),t()(),e(10,"td"),n(11),t(),e(12,"td")(13,"span",28),n(14),t()(),e(15,"td",29)(16,"button",30),d("click",function(){let a=f(i).$implicit,l=M();return x(l.edit(a))}),n(17,"Editar"),t(),e(18,"button",31),d("click",function(){let a=f(i).$implicit,l=M();return x(l.delete(a))}),n(19,"Excluir"),t()()()}if(p&2){let i=r.$implicit;s(2),u(i.title),s(2),u(i.target),s(3),E("width",i.progress,"%"),s(2),C("",i.progress,"%"),s(2),u(i.reward),s(2),h("completed",i.completed),s(),C(" ",i.completed?"Conclu\xEDda":"Em andamento"," ")}}var X=class p{constructor(r,i){this.metasService=r;this.fb=i}filter$=new g("");type$=new g("daily");metas$;form;showForm=!1;editingMeta=null;ngOnInit(){this.metas$=S([this.type$,this.filter$,this.metasService.metas$]).pipe(O(([r,i,o])=>{let a=i.toLowerCase();return o.filter(l=>l.type===r).filter(l=>!a||l.title.toLowerCase().includes(a)||l.description.toLowerCase().includes(a)||l.target.toLowerCase().includes(a)).sort((l,v)=>Number(v.completed)-Number(l.completed)||v.progress-l.progress)})),this.form=this.fb.group({id:[0],title:["",c.required],description:["",c.required],target:["",c.required],reward:["",c.required],type:["daily",c.required],progress:[0],completed:[!1]})}newMeta(){this.editingMeta=null,this.form.reset({id:0,title:"",description:"",target:"",reward:"",type:"daily",progress:0,completed:!1}),this.showForm=!0}edit(r){this.editingMeta=r,this.form.patchValue(r),this.showForm=!0}delete(r){if(!confirm("Deseja realmente excluir esta meta?"))return;let o=[...this.metasService.metasSubject.value].filter(a=>a.id!==r.id);this.metasService.metasSubject.next(o)}save(){if(this.form.invalid)return;let r=this.form.value,i=[...this.metasService.metasSubject.value];if(r.id===0)r.id=Math.max(0,...i.map(o=>o.id))+1,i.push(r);else{let o=i.findIndex(a=>a.id===r.id);o!==-1&&(i[o]=r)}this.metasService.metasSubject.next(i),this.showForm=!1}trackById(r,i){return i.id}static \u0275fac=function(i){return new(i||p)(b(W),b(J))};static \u0275cmp=P({type:p,selectors:[["app-admin-metas"]],decls:65,vars:8,consts:[[1,"admin-container"],[1,"header"],[1,"btn","primary",3,"click"],[1,"filters"],["type","text","placeholder","Buscar por nome, descri\xE7\xE3o ou objetivo...",3,"input"],[3,"change"],["value","daily"],["value","monthly"],[1,"table-wrapper"],[1,"meta-table"],["width","140px"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"side-form"],[1,"side-header"],[1,"close-btn",3,"click"],[3,"ngSubmit","formGroup"],["formControlName","title"],["rows","3","formControlName","description"],["formControlName","target"],["formControlName","reward"],["formControlName","type"],["type","number","formControlName","progress","min","0","max","100"],[1,"checkbox"],["type","checkbox","formControlName","completed"],["type","submit",1,"btn","primary","full"],[1,"progress"],[1,"bar"],[1,"progress-text"],[1,"status"],[1,"actions"],[1,"btn","small",3,"click"],[1,"btn","small","danger",3,"click"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1)(2,"h2"),n(3,"Gerenciamento de Metas"),t(),e(4,"button",2),d("click",function(){return o.newMeta()}),n(5,"+ Nova Meta"),t()(),e(6,"div",3)(7,"input",4),d("input",function(l){return o.filter$.next(l.target.value)}),t(),e(8,"select",5),d("change",function(l){return o.type$.next(l.target.value)}),e(9,"option",6),n(10,"Metas Di\xE1rias"),t(),e(11,"option",7),n(12,"Metas Mensais"),t()()(),e(13,"div",8)(14,"table",9)(15,"thead")(16,"tr")(17,"th"),n(18,"T\xEDtulo"),t(),e(19,"th"),n(20,"Objetivo"),t(),e(21,"th"),n(22,"Progresso"),t(),e(23,"th"),n(24,"Recompensa"),t(),e(25,"th"),n(26,"Status"),t(),m(27,"th",10),t()(),e(28,"tbody"),y(29,Y,20,9,"tr",11),k(30,"async"),t()()(),e(31,"div",12)(32,"div",13)(33,"h3"),n(34),t(),e(35,"button",14),d("click",function(){return o.showForm=!1}),n(36,"\xD7"),t()(),e(37,"form",15),d("ngSubmit",function(){return o.save()}),e(38,"label"),n(39,"T\xEDtulo"),t(),m(40,"input",16),e(41,"label"),n(42,"Descri\xE7\xE3o"),t(),m(43,"textarea",17),e(44,"label"),n(45,"Objetivo"),t(),m(46,"input",18),e(47,"label"),n(48,"Recompensa"),t(),m(49,"input",19),e(50,"label"),n(51,"Tipo"),t(),e(52,"select",20)(53,"option",6),n(54,"Di\xE1ria"),t(),e(55,"option",7),n(56,"Mensal"),t()(),e(57,"label"),n(58,"Progresso (%)"),t(),m(59,"input",21),e(60,"label",22),m(61,"input",23),n(62," Conclu\xEDda "),t(),e(63,"button",24),n(64," Salvar "),t()()()()),i&2&&(s(29),_("ngForOf",F(30,6,o.metas$))("ngForTrackBy",o.trackById),s(2),h("open",o.showForm),s(3),u(o.editingMeta?"Editar Meta":"Nova Meta"),s(3),_("formGroup",o.form))},dependencies:[I,N,K,$,L,R,D,z,T,q,V,j,H,U,Q,G,B,A],styles:['@charset "UTF-8";.admin-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;padding:25px;gap:20px;background:#f5f7fa;min-height:100vh}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:26px;font-weight:600}.filters[_ngcontent-%COMP%]{display:flex;gap:15px}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 14px;border-radius:6px;border:1px solid #ccc;flex:1;background:#fff;font-size:15px}.filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{max-width:200px}.table-wrapper[_ngcontent-%COMP%]{background:#fff;padding:10px;border-radius:10px;box-shadow:0 3px 10px #0001}.meta-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.meta-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:12px;font-size:14px;font-weight:600;border-bottom:2px solid #e3e6eb}.meta-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 12px;font-size:14px;border-bottom:1px solid #e9ecef}.progress[_ngcontent-%COMP%]{width:100px;height:8px;background:#e4e6eb;border-radius:4px;overflow:hidden;display:inline-block;margin-right:8px}.progress[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{height:100%;background:#4c8bf5}.progress-text[_ngcontent-%COMP%]{font-size:13px;color:#555}.status[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:12px;background:#e8eaed;color:#444}.status.completed[_ngcontent-%COMP%]{background:#c8f5d0;color:#0f7c1f}.actions[_ngcontent-%COMP%]{display:flex;gap:6px}.btn[_ngcontent-%COMP%]{padding:8px 12px;border-radius:6px;font-size:13px;cursor:pointer;border:none;font-weight:600}.btn.primary[_ngcontent-%COMP%]{background:#4c8bf5;color:#fff}.btn.danger[_ngcontent-%COMP%]{background:#e04e4e;color:#fff}.btn.small[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.btn.full[_ngcontent-%COMP%]{width:100%;margin-top:15px}.side-form[_ngcontent-%COMP%]{position:fixed;right:-450px;top:0;width:450px;height:100vh;background:#fff;box-shadow:-3px 0 12px #0002;padding:25px;transition:.3s ease;overflow-y:auto;display:flex;flex-direction:column}.side-form.open[_ngcontent-%COMP%]{right:0}.side-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin-top:15px}.side-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .side-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .side-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-top:6px;padding:10px;width:100%;border-radius:6px;border:1px solid #ccc;font-size:14px}.side-form[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.side-form[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:30px;cursor:pointer;color:#444}.side-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.side-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}']})};export{X as AdminMetasComponent};
