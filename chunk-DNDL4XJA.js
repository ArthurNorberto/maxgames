import{a as R}from"./chunk-IW5BWOF2.js";import{h as z}from"./chunk-TY3XJY7P.js";import"./chunk-5BLSFZMB.js";import{Ab as D,Bb as P,Ga as c,Kb as B,Pa as M,T as _,Tb as N,U as u,Ua as j,Ya as x,cb as V,db as g,eb as r,ec as A,fb as o,fc as G,gb as W,gc as U,lc as $,mb as O,ob as h,qb as p,xb as v,zb as l}from"./chunk-D5XL275M.js";var L=a=>({"grid-template-columns":a});function J(a,t){a&1&&(r(0,"div",17),W(1,"div",18),r(2,"p",19),l(3,"Gerando jogo..."),o()())}function Q(a,t){if(a&1){let e=O();r(0,"div",27),h("mousedown",function(){let i=_(e).index,m=p(3);return u(m.cellMouseDown(i))})("mouseenter",function(){let i=_(e).index,m=p(3);return u(m.cellMouseEnter(i))})("mouseup",function(){_(e);let i=p(3);return u(i.cellMouseUp())}),o()}if(a&2){let e=t.$implicit,n=t.index,i=p(3);v("selected",i.selectedCells.includes(n))("found",e.isFound),V("data-letter",e.letter)}}function H(a,t){if(a&1&&(r(0,"li"),l(1),o()),a&2){let e=t.$implicit,n=p(3);v("found",n.foundWords.includes(e)),c(),P(" ",e," ")}}function K(a,t){if(a&1){let e=O();r(0,"div",28)(1,"h4"),l(2),o(),r(3,"button",29),h("click",function(){_(e);let i=p(3);return u(i.newGame())}),l(4," \u{1F501} Nova Partida "),o()()}if(a&2){let e=p(3);c(2),D(e.endMessage)}}function X(a,t){if(a&1&&(r(0,"div",11)(1,"div",20)(2,"span"),l(3,"\u23F1\uFE0F Tempo: "),r(4,"strong"),l(5),o()(),r(6,"span"),l(7,"\u2B50 Pontos: "),r(8,"strong"),l(9),o()()(),r(10,"div",21)(11,"div",22),x(12,Q,1,5,"div",23),o()(),r(13,"div",24)(14,"h5"),l(15,"Palavras para encontrar:"),o(),r(16,"ul"),x(17,H,2,3,"li",25),o()(),x(18,K,5,1,"div",26),o()),a&2){let e=p(2);c(5),P("",e.timer,"s"),c(4),D(e.score),c(2),g("ngStyle",B(7,L,"repeat("+e.cols+", 1fr)")),c(),g("ngForOf",e.grid)("ngForTrackBy",e.trackByIndex),c(5),g("ngForOf",e.words),c(),g("ngIf",e.gameOver)}}function Z(a,t){if(a&1){let e=O();r(0,"div",11)(1,"div",12)(2,"button",13),h("click",function(){_(e);let i=p();return u(i.setDifficulty("facil"))}),l(3,"\u{1F60A} F\xE1cil (5)"),o(),r(4,"button",14),h("click",function(){_(e);let i=p();return u(i.setDifficulty("medio"))}),l(5,"\u{1F60E} M\xE9dio (8)"),o(),r(6,"button",15),h("click",function(){_(e);let i=p();return u(i.setDifficulty("dificil"))}),l(7,"\u{1F608} Dif\xEDcil (10)"),o()(),x(8,J,4,0,"div",16)(9,X,19,9,"div",9),o()}if(a&2){let e=p();c(2),v("active",e.difficulty==="facil"),c(2),v("active",e.difficulty==="medio"),c(2),v("active",e.difficulty==="dificil"),c(2),g("ngIf",e.loading),c(),g("ngIf",!e.loading)}}function q(a,t){if(a&1&&(r(0,"li"),l(1),r(2,"strong"),l(3),o()()),a&2){let e=t.$implicit;c(),P(" ",e.name," \u2014 "),c(2),P("",e.score," pts")}}function ee(a,t){if(a&1&&(r(0,"div",30)(1,"div",31)(2,"h5",32),l(3,"\u{1F3C6} Ranking \u2013 Quem encontrou mais palavras"),o(),r(4,"ol",33),x(5,q,4,2,"li",34),o()()()),a&2){let e=p();c(5),g("ngForOf",e.ranking)}}var Y=class a{constructor(t,e,n){this.cacaService=t;this.cdr=e;this.toastr=n}rows=12;cols=12;grid=[];words=[];foundWords=[];selectedCells=[];gameOver=!1;endMessage="";activeTab="jogo";difficulty="facil";score=0;timer=0;timerInterval=null;ranking=[{name:"Ana Souza",score:100},{name:"Carlos Lima",score:90},{name:"Marcos Silva",score:80}];loading=!1;ngOnInit(){this.startByDifficulty()}ngOnDestroy(){this.clearTimer()}setDifficulty(t){this.difficulty=t,this.toastr.info(`N\xEDvel ${t.toUpperCase()} selecionado!`,"Dificuldade",{timeOut:1500,positionClass:"toast-top-center"}),this.startByDifficulty()}startByDifficulty(){let t=8;this.difficulty==="facil"&&(t=5),this.difficulty==="dificil"&&(t=10),this.words=this.cacaService.getPalavrasAleatorias(t).map(e=>e.toUpperCase()),this.newGame()}newGame(){this.gameOver=!1,this.endMessage="",this.foundWords=[],this.selectedCells=[],this.score=0,this.timer=0,this.clearTimer(),this.toastr.info("Novo jogo iniciado!","Boa sorte!",{timeOut:1200,positionClass:"toast-bottom-right"}),this.generateGame()}generateGame(){this.loading=!0;let t=this.words.length?Math.max(...this.words.map(m=>m.length)):0,e=Math.max(12,t+2),n=!1,i=0;for(;!n&&i<6;)i++,this.rows=this.cols=e,n=this.buildGrid(),n||e++;this.loading=!1,n?(this.toastr.success("Ca\xE7a-palavras pronto!","Boa sorte!",{timeOut:1100,positionClass:"toast-top-center"}),this.startTimer()):(this.toastr.error("Erro ao gerar o jogo \u{1F61E}","Tente novamente"),this.gameOver=!0)}startTimer(){this.clearTimer();let t=Date.now();this.timerInterval=setInterval(()=>{this.timer=Math.floor((Date.now()-t)/1e3),this.timer>1e4&&this.clearTimer()},1e3)}clearTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)}buildGrid(){let t=[{dr:0,dc:1},{dr:1,dc:0},{dr:1,dc:1},{dr:0,dc:-1},{dr:-1,dc:0},{dr:-1,dc:-1},{dr:1,dc:-1},{dr:-1,dc:1}],e=Array.from({length:this.rows},()=>Array(this.cols).fill(null)),n=[],i=[...this.words].sort((d,s)=>s.length-d.length);for(let d of i){let s=d.toUpperCase();if(s.length>this.rows&&s.length>this.cols)return console.warn(`Palavra muito grande para o grid: ${s}`),!1;let f=!1,C=0,w=200;for(;!f&&C<w;){C++;let T=t[Math.floor(Math.random()*t.length)],y=T.dr,k=T.dc,I=this.rows-(y?s.length:1),S=this.cols-(k?s.length:1);if(I<0||S<0)break;let E=Math.floor(Math.random()*(I+1)),F=Math.floor(Math.random()*(S+1));if(this.canPlaceWord(e,s,E,F,y,k)){for(let b=0;b<s.length;b++)e[E+b*y][F+b*k]=s[b];f=!0,n.push(s)}}if(!f)return console.warn(`N\xE3o foi poss\xEDvel posicionar: ${s} (tentativas: ${Math.min(w,C)})`),!1}let m="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let d=0;d<this.rows;d++)for(let s=0;s<this.cols;s++){let f=e[d][s];f==null&&(e[d][s]=m.charAt(Math.floor(Math.random()*m.length)))}return this.grid=e.flat().map(d=>({letter:d,isFound:!1})),!0}canPlaceWord(t,e,n,i,m,d){for(let s=0;s<e.length;s++){let f=n+s*m,C=i+s*d;if(f<0||C<0||f>=this.rows||C>=this.cols)return!1;let w=t[f][C];if(w&&w!==e[s])return!1}return!0}trackByIndex(t){return t}cellMouseDown(t){this.selectedCells=[t]}cellMouseEnter(t){if(this.selectedCells.length>0){let e=this.selectedCells[this.selectedCells.length-1];t!==e&&!this.selectedCells.includes(t)&&this.selectedCells.push(t)}}cellMouseUp(){if(!this.selectedCells.length)return;let t=this.selectedCells.map(i=>this.grid[i].letter).join(""),e=t.split("").reverse().join(""),n=this.words.find(i=>i===t||i===e);if(n&&!this.foundWords.includes(n)){this.foundWords.push(n);for(let d of this.selectedCells)this.grid[d]&&(this.grid[d].isFound=!0);let i=Math.min(this.timer*2,800),m=Math.max(100-i/10,10);this.score+=Math.floor(m),this.toastr.success(`Palavra encontrada: ${n}!`,"Boa!",{timeOut:900}),this.foundWords.length===this.words.length&&(this.gameOver=!0,this.endMessage="\u{1F389} Parab\xE9ns! Voc\xEA encontrou todas as palavras!",this.toastr.success("Voc\xEA completou o jogo!","\u{1F3C1} Fim de jogo!"),this.clearTimer())}this.selectedCells=[]}static \u0275fac=function(e){return new(e||a)(M(R),M(N),M(z))};static \u0275cmp=j({type:a,selectors:[["app-caca-palavras"]],decls:17,vars:6,consts:[[1,"wordsearch-wrapper","container","py-5"],[1,"card","shadow-lg","border-0","game-card","animate__animated","animate__fadeIn"],[1,"card-body","p-4"],[1,"text-center","mb-4"],[1,"mb-1"],[1,"text-muted","small"],[1,"nav","nav-tabs","custom-tabs","mb-4","justify-content-center"],[1,"nav-item"],[1,"nav-link",3,"click"],["class","animate__animated animate__fadeIn",4,"ngIf"],["class","rank-pane animate__animated animate__fadeIn",4,"ngIf"],[1,"animate__animated","animate__fadeIn"],[1,"difficulty-select","text-center","mb-4"],[1,"btn","diff-btn","easy",3,"click"],[1,"btn","diff-btn","medium",3,"click"],[1,"btn","diff-btn","hard",3,"click"],["class","loading-overlay text-center py-5",4,"ngIf"],[1,"loading-overlay","text-center","py-5"],["role","status",1,"spinner-border","text-primary","mb-3"],[1,"text-muted"],[1,"d-flex","justify-content-between","align-items-center","mb-3","px-3"],[1,"game-area","position-relative","mb-4"],[1,"grid",3,"ngStyle"],["class","cell",3,"selected","found","mousedown","mouseenter","mouseup",4,"ngFor","ngForOf","ngForTrackBy"],[1,"word-list","text-center","mb-4"],[3,"found",4,"ngFor","ngForOf"],["class","end-screen text-center animate__animated animate__zoomIn",4,"ngIf"],[1,"cell",3,"mousedown","mouseenter","mouseup"],[1,"end-screen","text-center","animate__animated","animate__zoomIn"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"rank-pane","animate__animated","animate__fadeIn"],[1,"panel-stats","p-4","bg-light","rounded","mx-auto",2,"max-width","500px"],[1,"mb-3","text-center"],[1,"rank-list"],[4,"ngFor","ngForOf"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),l(5,"\u{1F50D} Ca\xE7a-Palavras Autoglass"),o(),r(6,"p",5),l(7,"Escolha o n\xEDvel e encontre as palavras do mundo automotivo!"),o()(),r(8,"ul",6)(9,"li",7)(10,"button",8),h("click",function(){return n.activeTab="jogo"}),l(11," \u{1F3AE} Jogo "),o()(),r(12,"li",7)(13,"button",8),h("click",function(){return n.activeTab="rank"}),l(14," \u{1F3C6} Ranking "),o()()(),x(15,Z,10,8,"div",9)(16,ee,6,1,"div",10),o()()()),e&2&&(c(10),v("active",n.activeTab==="jogo"),c(3),v("active",n.activeTab==="rank"),c(2),g("ngIf",n.activeTab==="jogo"),c(),g("ngIf",n.activeTab==="rank"))},dependencies:[$,A,G,U],styles:['@charset "UTF-8";.wordsearch-wrapper[_ngcontent-%COMP%]{background:linear-gradient(180deg,#f7fbff,#eef6fb);min-height:100vh;font-family:Segoe UI,system-ui;padding-bottom:40px}.wordsearch-wrapper[_ngcontent-%COMP%]   .game-card[_ngcontent-%COMP%]{max-width:900px;margin:auto;border-radius:14px}.wordsearch-wrapper[_ngcontent-%COMP%]   .custom-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:none;padding:10px 22px;font-weight:600;color:#004a7c;transition:.25s ease}.wordsearch-wrapper[_ngcontent-%COMP%]   .custom-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:#004a7c;color:#fff;border-radius:10px;box-shadow:0 3px 12px #0000002e}.wordsearch-wrapper[_ngcontent-%COMP%]   .difficulty-select[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.wordsearch-wrapper[_ngcontent-%COMP%]   .difficulty-select[_ngcontent-%COMP%]   .diff-btn[_ngcontent-%COMP%]{padding:8px 18px;border-radius:10px;transition:.2s;font-weight:600;margin:0 6px;border:none;cursor:pointer}.wordsearch-wrapper[_ngcontent-%COMP%]   .difficulty-select[_ngcontent-%COMP%]   .diff-btn.easy[_ngcontent-%COMP%]{background:#23c27522;color:#0e6b43}.wordsearch-wrapper[_ngcontent-%COMP%]   .difficulty-select[_ngcontent-%COMP%]   .diff-btn.medium[_ngcontent-%COMP%]{background:#ffc84d33;color:#b37400}.wordsearch-wrapper[_ngcontent-%COMP%]   .difficulty-select[_ngcontent-%COMP%]   .diff-btn.hard[_ngcontent-%COMP%]{background:#ff6b6b33;color:#a80000}.wordsearch-wrapper[_ngcontent-%COMP%]   .difficulty-select[_ngcontent-%COMP%]   .diff-btn.active[_ngcontent-%COMP%]{transform:translateY(-2px) scale(1.05);box-shadow:0 6px 16px #00000026}.wordsearch-wrapper[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid;gap:6px;max-width:600px;margin:25px auto 30px;position:relative}.wordsearch-wrapper[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{width:44px;height:44px;position:relative;background:#fff;border-radius:8px;border:2px solid transparent;cursor:pointer;-webkit-user-select:none;user-select:none;transition:.18s ease;color:transparent}.wordsearch-wrapper[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]:before{content:attr(data-letter);position:absolute;inset:0;display:flex;justify-content:center;align-items:center;font-weight:700;font-size:1.1rem;color:#004a7c;pointer-events:none}.wordsearch-wrapper[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]:hover{background:#eaf4ff;transform:translateY(-2px)}.wordsearch-wrapper[_ngcontent-%COMP%]   .cell.selected[_ngcontent-%COMP%]{background:#ffe169;border-color:#004a7c}.wordsearch-wrapper[_ngcontent-%COMP%]   .cell.found[_ngcontent-%COMP%]{background:linear-gradient(145deg,#a6f0b0,#7edc89);border-color:#2e8b57;animation:_ngcontent-%COMP%_glow .45s ease}.wordsearch-wrapper[_ngcontent-%COMP%]   .word-list[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.wordsearch-wrapper[_ngcontent-%COMP%]   .word-list[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700;color:#004a7c;margin-bottom:12px}.wordsearch-wrapper[_ngcontent-%COMP%]   .word-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;display:flex;justify-content:center;flex-wrap:wrap;gap:10px}.wordsearch-wrapper[_ngcontent-%COMP%]   .word-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:6px 12px;border-radius:8px;font-weight:600;background:#eef2f7;color:#004a7c;transition:.18s ease}.wordsearch-wrapper[_ngcontent-%COMP%]   .word-list[_ngcontent-%COMP%]   li.found[_ngcontent-%COMP%]{background:#23c275;color:#fff;transform:scale(1.05);text-decoration:line-through}.wordsearch-wrapper[_ngcontent-%COMP%]   .rank-pane[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade .4s ease}.wordsearch-wrapper[_ngcontent-%COMP%]   .panel-stats[_ngcontent-%COMP%]{border-radius:12px;background:#fff;border:1px solid rgba(0,0,0,.06);box-shadow:0 6px 18px #0000000f;padding:15px 20px}.wordsearch-wrapper[_ngcontent-%COMP%]   .panel-stats[_ngcontent-%COMP%]   .rank-list[_ngcontent-%COMP%]{margin:0;padding-left:20px}.wordsearch-wrapper[_ngcontent-%COMP%]   .panel-stats[_ngcontent-%COMP%]   .rank-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px;font-size:1rem}@keyframes _ngcontent-%COMP%_glow{0%{transform:scale(1);box-shadow:0 0 #0000}50%{transform:scale(1.06);box-shadow:0 0 14px #2e8b5740}to{transform:scale(1);box-shadow:0 0 8px #2e8b571f}}@keyframes _ngcontent-%COMP%_fade{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media(max-width:480px){.wordsearch-wrapper[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{width:36px;height:36px}.wordsearch-wrapper[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]:before{font-size:.95rem}.wordsearch-wrapper[_ngcontent-%COMP%]   .difficulty-select[_ngcontent-%COMP%]   .diff-btn[_ngcontent-%COMP%]{margin-bottom:8px}}']})};export{Y as CacaPalavrasComponent};
