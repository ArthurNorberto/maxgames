import{a as D,b as B}from"./chunk-O5GQYPGG.js";import{a as T}from"./chunk-Y33K7AZW.js";import{a as L}from"./chunk-JWPH47B2.js";import{d as E,h as I}from"./chunk-PTHPNUVQ.js";import"./chunk-5BLSFZMB.js";import{d as F,e as V,f as k,g as N,h as U,l as j,m as z,n as q,q as W,t as R}from"./chunk-5VMU7HGZ.js";import{Ab as x,Db as C,Eb as S,Fb as M,Ga as s,Pa as c,T as p,U as u,Ua as P,Ya as f,a as O,db as d,eb as e,ec as y,fb as t,fc as w,gb as g,lc as A,mb as b,ob as v,qb as h,zb as n}from"./chunk-D5XL275M.js";function Y(r,o){if(r&1&&(e(0,"option",27),n(1),t()),r&2){let i=o.$implicit;d("value",i),s(),x(i)}}function H(r,o){if(r&1&&(e(0,"div",20)(1,"label"),n(2,"Usu\xE1rio"),t(),e(3,"select",28)(4,"option"),n(5),t()()()),r&2){let i=h();s(5),x(i.usuariosSetor.nome)}}function J(r,o){if(r&1&&(e(0,"option"),n(1),t()),r&2){let i=o.$implicit;s(),x(i)}}function K(r,o){if(r&1){let i=b();e(0,"div",20)(1,"label"),n(2,"Tribo"),t(),e(3,"select",29),M("ngModelChange",function(l){p(i);let m=h();return S(m.team,l)||(m.team=l),u(l)}),e(4,"option",22),n(5,"Selecione..."),t(),f(6,J,2,1,"option",30),t()()}if(r&2){let i=h();s(3),C("ngModel",i.team),s(3),d("ngForOf",i.equipes)}}var G=class r{constructor(o,i,a,l,m){this.router=o;this.loginService=i;this.usuariosService=a;this.comunidadesService=l;this.tribosService=m}setores=[];equipes=[];usuariosSetor=null;sector="";team="";ngOnInit(){this.comunidadesService.getComunidades().subscribe(o=>this.setores=o.map(i=>i.nome).filter(i=>i==="Administrador"))}onSetorChange(){this.team="",this.usuariosService.getUsuarioPorSetor(this.sector).subscribe(o=>this.usuariosSetor=o),this.sector==="Central de Atendimento"?this.tribosService.getTribos().subscribe(o=>this.equipes=o.map(i=>i.nome)):this.equipes=[]}login(){if(!this.usuariosSetor)return;let o=O({},this.usuariosSetor);this.sector==="Central de Atendimento"&&(o.tribo=this.team),this.loginService.saveUser(o),this.loginService.usuarioEhAdmin()?this.router.navigate(["/admin/inicio"]):this.router.navigate(["/inicio"])}static \u0275fac=function(i){return new(i||r)(c(E),c(L),c(T),c(D),c(B))};static \u0275cmp=P({type:r,selectors:[["app-login-admin"]],decls:47,vars:5,consts:[["loginForm","ngForm"],[1,"admin-login-wrapper"],[1,"left-panel"],[1,"brand-area"],["src","/assets/max-play-logo2.png","alt","Autoglass Corporativo",1,"brand-logo"],[1,"system-title"],[1,"system-description"],[1,"info-highlights"],[1,"highlight"],[1,"icon-circle"],[1,"bi","bi-lock-fill"],[1,"bi","bi-shield-check"],[1,"bi","bi-people-fill"],[1,"right-panel"],[1,"login-card"],[1,"avatar-area"],["src","/assets/avatars/avatar-admin.png","alt","Administrador",1,"admin-avatar"],[1,"title"],[1,"subtitle"],[3,"ngSubmit"],[1,"form-group"],["required","","name","sector",1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[1,"btn-submit",3,"disabled"],[1,"corp-footer"],[3,"value"],["disabled","",1,"form-control"],["required","","name","team",1,"form-control",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"]],template:function(i,a){if(i&1){let l=b();e(0,"div",1)(1,"div",2)(2,"div",3),g(3,"img",4),e(4,"h1",5),n(5,"Portal Administrativo"),t(),e(6,"p",6),n(7," Acesso exclusivo para gestores e administradores. "),t()(),e(8,"div",7)(9,"div",8)(10,"div",9),g(11,"i",10),t(),e(12,"span"),n(13,"Ambiente Seguro"),t()(),e(14,"div",8)(15,"div",9),g(16,"i",11),t(),e(17,"span"),n(18,"Controle de Acessos"),t()(),e(19,"div",8)(20,"div",9),g(21,"i",12),t(),e(22,"span"),n(23,"Gest\xE3o de Usu\xE1rios"),t()()()(),e(24,"div",13)(25,"div",14)(26,"div",15),g(27,"img",16),t(),e(28,"h2",17),n(29,"Login Administrativo"),t(),e(30,"p",18),n(31,"Autentique suas credenciais para continuar"),t(),e(32,"form",19,0),v("ngSubmit",function(){return p(l),u(a.login())}),e(34,"div",20)(35,"label"),n(36,"Comunidade"),t(),e(37,"select",21),M("ngModelChange",function(_){return p(l),S(a.sector,_)||(a.sector=_),u(_)}),v("change",function(){return p(l),u(a.onSetorChange())}),e(38,"option",22),n(39,"Selecione..."),t(),f(40,Y,2,2,"option",23),t()(),f(41,H,6,1,"div",24)(42,K,7,2,"div",24),e(43,"button",25),n(44," Entrar "),t(),e(45,"p",26),n(46,"Autoglass \u2022 \xC1rea Administrativa"),t()()()()()}i&2&&(s(37),C("ngModel",a.sector),s(3),d("ngForOf",a.setores),s(),d("ngIf",a.usuariosSetor),s(),d("ngIf",a.sector==="Central de Atendimento"),s(),d("disabled",!a.usuariosSetor||a.sector==="Central de Atendimento"&&!a.team))},dependencies:[A,y,w,I,R,U,z,q,j,F,V,W,N,k],styles:['@charset "UTF-8";.admin-login-wrapper[_ngcontent-%COMP%]{display:flex;height:100vh;width:100vw;font-family:Inter,Segoe UI,sans-serif;background:#f4f6f9;overflow:hidden}.left-panel[_ngcontent-%COMP%]{width:48%;background:linear-gradient(135deg,#0b1a34,#11284e);color:#fff;display:flex;flex-direction:column;justify-content:center;padding:60px}.brand-area[_ngcontent-%COMP%]{margin-bottom:50px}.brand-area[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%]{width:180px;margin-bottom:28px}.brand-area[_ngcontent-%COMP%]   .system-title[_ngcontent-%COMP%]{font-size:32px;font-weight:600;margin-bottom:6px}.brand-area[_ngcontent-%COMP%]   .system-description[_ngcontent-%COMP%]{font-size:15px;opacity:.85}.info-highlights[_ngcontent-%COMP%]{display:flex;gap:30px}.info-highlights[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.info-highlights[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]   .icon-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:#ffffff14;border:1px solid rgba(255,255,255,.18);display:flex;align-items:center;justify-content:center;margin-bottom:10px}.info-highlights[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]   .icon-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px;color:#e2ecff}.info-highlights[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;opacity:.92}.right-panel[_ngcontent-%COMP%]{width:52%;display:flex;justify-content:center;align-items:center;padding:40px}.login-card[_ngcontent-%COMP%]{width:420px;background:#fff;padding:36px;border-radius:14px;box-shadow:0 8px 28px #0000001f;animation:_ngcontent-%COMP%_fadeIn .35s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}.avatar-area[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.avatar-area[_ngcontent-%COMP%]   .admin-avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;border:2px solid #d0d7e5}.title[_ngcontent-%COMP%]{font-size:22px;text-align:center;font-weight:600}.subtitle[_ngcontent-%COMP%]{text-align:center;margin-top:6px;margin-bottom:22px;font-size:14px;color:#666}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-bottom:4px;color:#333}.form-control[_ngcontent-%COMP%]{padding:11px 12px;border-radius:8px;border:1px solid #ccd3e0;background:#fff;font-size:14px;transition:border-color .18s,box-shadow .18s}.form-control[_ngcontent-%COMP%]:focus{border-color:#1e4ed9;box-shadow:0 0 0 3px #1e4ed926;outline:none}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:13px;margin-top:10px;background:#1e4ed9;color:#fff;font-weight:600;border-radius:10px;border:none;cursor:pointer;transition:background .18s}.btn-submit[_ngcontent-%COMP%]:hover:not([disabled]){background:#1639a5}.btn-submit[disabled][_ngcontent-%COMP%]{background:#9ca8c9;cursor:not-allowed}.corp-footer[_ngcontent-%COMP%]{text-align:center;margin-top:14px;font-size:12px;color:#6f7a93}@media(max-width:1000px){.left-panel[_ngcontent-%COMP%]{display:none}.right-panel[_ngcontent-%COMP%]{width:100%}.login-card[_ngcontent-%COMP%]{width:88%;max-width:420px}}']})};export{G as LoginAdminComponent};
